(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plate"],{"0292":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("板块详情")])],1)],1),r("el-card",[r("el-form",{ref:"queryForm",staticClass:"form_border",attrs:{model:e.queryForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"板块分类",prop:"columnCategoryId"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择板块分类"},model:{value:e.queryForm.columnCategoryId,callback:function(t){e.$set(e.queryForm,"columnCategoryId",t)},expression:"queryForm.columnCategoryId"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"版块标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入版块标题"},model:{value:e.queryForm.title,callback:function(t){e.$set(e.queryForm,"title",t)},expression:"queryForm.title"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增板块")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"categoryName",label:"板块分类"}}),r("el-table-column",{attrs:{prop:"title",label:"版块标题"}}),r("el-table-column",{attrs:{prop:"createDatetime",label:"创建时间"}}),r("el-table-column",{attrs:{label:"已选机器"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{cursor:"pointer",color:"#40A9FE"},on:{click:function(r){return r.stopPropagation(),e.checkMachine(t.row.deviceMac)}}},[e._v("查看已选机器")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{slot:"reference",type:"primary",underline:!1},on:{click:function(r){return r.stopPropagation(),e.putaway(t.row)}},slot:"reference"},[e._v("选择机器")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.del(t.row.id)}}},[e._v("删除")])]}}])})],1),e.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryForm,e.loadData)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryForm,e.loadData)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryForm.total,"current-page":e.queryForm.page,"page-size":e.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryForm,"page",t)},"update:current-page":function(t){return e.$set(e.queryForm,"page",t)},"update:pageSize":function(t){return e.$set(e.queryForm,"size",t)},"update:page-size":function(t){return e.$set(e.queryForm,"size",t)},"current-change":e.loadData}})],1):e._e()],1),r("el-dialog",{attrs:{title:"选择机器",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-divider"),e._v(" "+e._s(e.deviceName)+" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1),r("ChooseMachine",{ref:"ChooseMachine",on:{getName:e.getName}})],1)],1)},i=[],o=(r("e18c"),r("1c2e"),r("598d")),l={components:{ChooseMachine:o["a"]},data:function(){return{queryForm:{title:"",columnCategoryId:"",size:10,page:1,total:""},tableData:[],options:[],dialogVisible:!1,deviceName:"",selectId:"",formLabelWidth:"100px"}},methods:{getName:function(e){var t=this;this.selectDeviceName=e;var r={columnId:this.selectId.toString(),deviceIds:this.selectDeviceName.toString()};this.httpPost("/columns/devices",r).then((function(e){t.$message({type:"success",message:"绑定成功!"}),t.loadData()}))},putaway:function(e){this.selectId=e.id,this.$refs.ChooseMachine.selected(e.deviceId)},checkMachine:function(e){this.deviceName=e,this.dialogVisible=!0},search:function(){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editclassify",name:"EditClassify",params:{type:"add"}})},edit:function(e){this.$router.push({path:"/editclassify",name:"EditClassify",params:{type:"edit",info:e}})},onSubmit:function(){},choose:function(e){this.dialogVisible=!0},del:function(e){var t=this;this.$confirm("此操作将删除数据, 是否继续?","提示",{type:"warning"}).then((function(){t.httpPost("/columns/rem/"+e,"").then((function(e){t.$message({type:"success",message:"删除成功!"}),t.loadData()}))})).catch((function(){}))},loadData:function(){var e=this;this.httpGet("/columns/query/",this.queryForm).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){var e=this;this.loadData();var t={size:100,page:1,total:""};this.httpGet("/column/category/query/",t).then((function(t){e.options=t.rows}))}},s=l,n=r("9ca4"),c=Object(n["a"])(s,a,i,!1,null,"ec725292",null);t["default"]=c.exports},"02d2":function(e,t,r){},"81c5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/platecategory"}}},[e._v("板块分类")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改分类":"新增分类"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"分类图片",prop:"goodPic"}},[r("el-upload",{ref:"uploadMainPicture",staticClass:"picMain",attrs:{multiple:"",limit:1,"file-list":e.ruleForm.fileListMain,"list-type":"picture-card",action:e.uploadActionMain(),"on-remove":e.handleRemoveMain,"on-success":e.uploadSuccessMain,"before-upload":e.beforeUpload}},[r("i",{staticClass:"el-icon-plus"})]),r("div",{staticClass:"font_size"})],1),r("el-form-item",{attrs:{label:"分类描述",prop:"description"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",type:"textarea",placeholder:"请输入描述",maxlength:"30","show-word-limit":""},model:{value:e.ruleForm.describes,callback:function(t){e.$set(e.ruleForm,"describes",t)},expression:"ruleForm.describes"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},i=[],o=(r("fe59"),r("9302"),r("2eeb"),r("ea69"),r("e18c"),r("e35a"),r("1c2e"),r("0d7a"),r("08ba"),{data:function(){return{ruleForm:{name:"",fileListMain:[],describes:""},rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],describes:[{required:!0,message:"请输入分类描述",trigger:"blur"}],fileListMain:[{required:!0,message:"请上传分类图片",trigger:"blur"}]},uploadImgMain:!1}},methods:{handleImgClose:function(e){this.$refs.upload.clearFiles(),e()},handleRemoveMain:function(e,t){if(t.length!=this.ruleForm.fileListMain.length){for(var r=e.response.data.fileName,a=null,i=0,o=this.ruleForm.fileListMain.length;i<o;i++)if(this.ruleForm.fileListMain[i].response.data.fileName===r){a=i;break}this.ruleForm.fileListMain.splice(a,1)}t.length<1&&(document.querySelector(".picMain .el-upload--picture-card").style.display="block")},uploadSuccessMain:function(e,t,r){this.ruleForm.fileListMain=r,this.ruleForm.fileListMain.length>=1&&(document.querySelector(".picMain .el-upload--picture-card").style.display="none")},beforeUpload:function(){this.ruleForm.fileListMain.length>=1&&(document.querySelector(".picMain .el-upload--picture-card").style.display="none")},beforeAvatarUpload:function(e){this.isUpload=!0;var t="image/jpeg"===e.type||"image/png",r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG / png 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},uploadActionMain:function(){return this.$picUpload},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=Object.assign({},t.ruleForm);0===t.ruleForm.fileListMain.length?t.uploadImgMain=!0:t.uploadImgMain=!1,r["fileListMain"]&&r["fileListMain"].length>0?r["picture"]=JSON.stringify(r["fileListMain"].map((function(e){return e.response.data.fileName})).join(",").split(",")).toString():delete r["picture"],"add"==t.type?t.httpPost("/column/category/add",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/plateCategory",query:{}})})).catch((function(){return t.$message.error(res.message),!1})):t.httpPost("/column/category/mod",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/plateCategory",query:{}})})).catch((function(){return t.$message.error(res.message),!1}))}))},cancelForm:function(){this.$router.back()}},mounted:function(){var e=this,t=this.$route.params;if(t&&"edit"===t.type){this.type="edit";var r=t.info;this.ruleForm=t.info,this.ruleForm.fileListMain=[],r["picture"]&&(JSON.parse(r["picture"]).forEach((function(t){return e.ruleForm.fileListMain.push({response:{data:{fileName:t}},url:e.$picDownload+t})})),this.ruleForm.fileListMain.length>=1&&(document.querySelector(".picMain .el-upload--picture-card").style.display="none"))}else this.type="add"}}),l=o,s=(r("d2c9"),r("9ca4")),n=Object(s["a"])(l,a,i,!1,null,"a1304278",null);t["default"]=n.exports},"8a26":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/classify"}}},[e._v("板块详情")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改板块详情":"新增板块详情"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"板块标题",prop:"title"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"标题图片",prop:"fileList"}},[r("el-upload",{ref:"uploadPictures",staticClass:"pics",attrs:{"file-list":e.ruleForm.fileList,multiple:"",limit:5,"list-type":"picture-card",action:e.uploadAction(),"on-remove":e.handleRemove,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload}},[r("i",{staticClass:"el-icon-plus"})]),r("div",[e._v("支持 png/jpg 格式，图片最小尺寸 480*480，最大 5M;最多上传5张")])],1),r("el-form-item",{attrs:{label:"板块分类",prop:"columnCategoryId"}},[r("el-select",{attrs:{placeholder:"请选择板块分类"},model:{value:e.ruleForm.columnCategoryId,callback:function(t){e.$set(e.ruleForm,"columnCategoryId",t)},expression:"ruleForm.columnCategoryId"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"内容",prop:"content"}},[r("Tinymce",{ref:"bzlc",staticStyle:{width:"60%"},attrs:{id:"tinymceBzlc"},on:{getCont:e.getCont}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},i=[],o=(r("fe59"),r("9302"),r("2eeb"),r("ea69"),r("e18c"),r("e35a"),r("1c2e"),r("0d7a"),r("08ba"),r("56f9")),l={components:{Tinymce:o["a"]},data:function(){return{ruleForm:{title:"",fileList:[],columnCategoryId:"",content:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],fileList:[{required:!0,message:"请上传图片",trigger:"blur"}],columnCategoryId:[{required:!0,message:"请选择板块分类",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},options:[],info:!1}},methods:{uploadAction:function(){return this.$picUpload},handleRemove:function(e,t){if(t.length!=this.ruleForm.fileList.length){for(var r=e.response.data.fileName,a=null,i=0,o=this.ruleForm.fileList.length;i<o;i++)if(this.ruleForm.fileList[i].response.data.fileName===r){a=i;break}this.ruleForm.fileList.splice(a,1)}t.length<5&&(document.querySelector(".pics .el-upload--picture-card").style.display="block")},uploadSuccess:function(e,t,r){this.ruleForm.fileList=r,this.ruleForm.fileList.length>=5&&(document.querySelector(".pics .el-upload--picture-card").style.display="none")},beforeUpload:function(){this.ruleForm.fileList.length>=5&&(document.querySelector(".pics .el-upload--picture-card").style.display="none")},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){if(0===t.ruleForm.fileList.length?t.uploadImg=!0:t.uploadImg=!1,""===t.ruleForm.content?t.info=!0:t.info=!1,t.uploadImg||t.info)return!1;var r=Object.assign({},t.ruleForm);r["fileList"]&&r["fileList"].length>0?r["pictures"]=JSON.stringify(r["fileList"].map((function(e){return e.response.data.fileName})).join(",").split(",")).toString():delete r["pictures"],"add"==t.type?t.httpPost("/columns/add",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/plate",query:{}})})).catch((function(){return t.$message.error(res.message),!1})):t.httpPost("/columns/mod",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/plate",query:{}})})).catch((function(){return t.$message.error(res.message),!1}))}}))},getCont:function(e){this.ruleForm.content=e},cancelForm:function(){this.$router.back()}},mounted:function(){var e=this,t={size:10,page:1,total:"",specialMaterial:0};if(this.httpGet("/column/category/query/",t).then((function(t){e.options=t.rows})),"add"===this.$route.params.type)this.type="add";else if("edit"===this.$route.params.type){var r=this.$route.params.info;this.type="edit",this.ruleForm=this.$route.params.info,this.$refs.bzlc.editorValue=this.ruleForm.content,this.ruleForm.fileList=[],r["pictures"]&&(JSON.parse(r["pictures"]).forEach((function(t){return e.ruleForm.fileList.push({response:{data:{fileName:t}},url:e.$picDownload+t})})),this.ruleForm.fileList.length>=5&&(document.querySelector(".pic .el-upload--picture-card").style.display="none"))}}},s=l,n=(r("e465"),r("9ca4")),c=Object(n["a"])(s,a,i,!1,null,"019b41e8",null);t["default"]=c.exports},a896:function(e,t,r){},c7c9:function(e,t,r){"use strict";var a=r("c8651"),i=r.n(a);i.a},c863:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("板块分类")])],1)],1),r("el-card",[r("el-form",{ref:"queryForm",staticClass:"form_border",attrs:{model:e.queryForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增分类")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{label:"缩略图"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{attrs:{width:"80",src:e.imgPath(t.row.picture),alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"name",label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{ref:"name"},[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{prop:"describes",label:"分类描述"}}),r("el-table-column",{attrs:{label:"创建时间",prop:"createDatetime"}}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{slot:"reference",type:"primary",underline:!1},on:{click:function(r){return r.stopPropagation(),e.chooseDevice(t.row)}},slot:"reference"},[e._v("选择机器")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.del(t.row.id)}}},[e._v("删除")])]}}])})],1),e.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryForm,e.loadData)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryForm,e.loadData)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryForm.total,"current-page":e.queryForm.page,"page-size":e.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryForm,"page",t)},"update:current-page":function(t){return e.$set(e.queryForm,"page",t)},"update:pageSize":function(t){return e.$set(e.queryForm,"size",t)},"update:page-size":function(t){return e.$set(e.queryForm,"size",t)},"current-change":e.loadData}})],1):e._e()],1)],1),r("ChooseMachine",{ref:"ChooseMachine",on:{getName:e.getName}})],1)},i=[],o=r("598d"),l={components:{ChooseMachine:o["a"]},data:function(){return{queryForm:{name:"",size:10,page:1,total:""},tableData:[],dialogVisible:!1,selectId:"",formLabelWidth:"100px"}},methods:{getName:function(e){this.selectDeviceName=e;this.selectId,this.selectDeviceName},chooseDevice:function(e){this.selectId=e.id,this.$refs.ChooseMachine.selected(e.deviceId)},imgPath:function(e){return e?this.$picDownload+e.substring(2,e.length-2):""},del:function(e){var t=this;this.$confirm("此操作将删除数据, 是否继续?","提示",{type:"warning"}).then((function(){t.httpPost("/column/category/rem/"+e,"").then((function(e){t.$message({type:"success",message:"删除成功!"}),t.loadData()}))})).catch((function(){}))},search:function(){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editPlateCategory",name:"EditPlateCategory",params:{type:"add"}})},edit:function(e){this.$router.push({path:"/editPlateCategory",name:"EditPlateCategory",params:{type:"edit",info:e}})},editdischarging:function(){this.dialogVisible=!0},loadData:function(){var e=this;this.httpGet("/column/category/query/",this.queryForm).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},s=l,n=(r("c7c9"),r("9ca4")),c=Object(n["a"])(s,a,i,!1,null,"4e2914f8",null);t["default"]=c.exports},c8651:function(e,t,r){},d2c9:function(e,t,r){"use strict";var a=r("02d2"),i=r.n(a);i.a},e465:function(e,t,r){"use strict";var a=r("a896"),i=r.n(a);i.a}}]);
//# sourceMappingURL=plate.d863cc6a.js.map