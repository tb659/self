(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["alarm"],{1255:function(e,t,a){"use strict";var r=a("51a4"),l=a.n(r);l.a},"51a4":function(e,t,a){},"60fe":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l}));var r=[{value:"W",label:"W - 水量"},{value:"C",label:"C - 纸杯"},{value:"S",label:"S - 料仓"},{value:"E",label:"E - 料仓电机"},{value:"D",label:"D - 自动门"},{value:"M",label:"M - 电磁阀"},{value:"B",label:"B - 搅拌器"},{value:"O",label:"O - 其它 OTHER"}],l=[{value:"C",label:"新增任务"},{value:"R",label:"接受任务"},{value:"D",label:"拒绝任务"},{value:"F",label:"完成任务"},{value:"E",label:"消除报警"}]},aebf:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("alarm",{attrs:{url:"/device/alarm/query_all"}})},l=[],n=(a("60fe"),a("eb5a")),o={components:{Alarm:n["a"]},data:function(){return{}},methods:{},mounted:function(){}},s=o,i=a("9ca4"),u=Object(i["a"])(s,r,l,!1,null,null,null);t["default"]=u.exports},c614:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("alarm",{attrs:{url:"/device/alarm/query"}})},l=[],n=(a("60fe"),a("eb5a")),o={components:{Alarm:n["a"]},data:function(){return{}},methods:{},mounted:function(){}},s=o,i=a("9ca4"),u=Object(i["a"])(s,r,l,!1,null,null,null);t["default"]=u.exports},eb5a:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("配料报警")])],1)],1),a("el-card",[a("el-form",{ref:"queryForm",staticClass:"form_border",attrs:{inline:"",model:e.queryForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"设备名称"}},[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.queryForm.deviceName,callback:function(t){e.$set(e.queryForm,"deviceName",t)},expression:"queryForm.deviceName"}})],1),a("el-form-item",{attrs:{label:"设备Mac"}},[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.queryForm.deviceMac,callback:function(t){e.$set(e.queryForm,"deviceMac",t)},expression:"queryForm.deviceMac"}})],1),a("el-form-item",{attrs:{label:"报警类型"}},[a("el-select",{attrs:{placeholder:"请选择报警类型",clearable:""},model:{value:e.queryForm.alarmType,callback:function(t){e.$set(e.queryForm,"alarmType",t)},expression:"queryForm.alarmType"}},e._l(e.alarmTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"报警状态"}},[a("el-select",{attrs:{placeholder:"请选择报警状态",clearable:""},model:{value:e.queryForm.handleState,callback:function(t){e.$set(e.queryForm,"handleState",t)},expression:"queryForm.handleState"}},e._l(e.handleStates,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始有效时间"},on:{change:function(t){e.changeDate(t,"startDate")}},model:{value:e.queryForm.startDate,callback:function(t){e.$set(e.queryForm,"startDate",t)},expression:"queryForm.startDate"}})],1),a("el-form-item",{attrs:{label:"结束时间",prop:"endDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束有效时间"},on:{change:function(t){e.changeDate(t,"endDate")}},model:{value:e.queryForm.endDate,callback:function(t){e.$set(e.queryForm,"endDate",t)},expression:"queryForm.endDate"}})],1),a("el-form-item",{staticClass:"select_btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),a("div",{staticClass:"MT_table_cont"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"deviceName",label:"设备名称"}}),a("el-table-column",{attrs:{prop:"alarmType",label:"报警类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.alarmType(t.row.alarmType))+" ")]}}])}),a("el-table-column",{attrs:{prop:"handleState",label:"报警状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.handleState(t.row.handleState))+" ")]}}])}),a("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.dateFormat(t.row.alarmTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"handleUsername",label:"处理人",width:"80"}}),a("el-table-column",{attrs:{label:"处理时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.dateFormat(t.row.updateDatetime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.alarmDetail(t.row.id)}}},[e._v("查看日志")]),a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.clearAlarm(t.row.id)}}},[e._v("清除报警")])]}}])})],1),e.queryForm.total?a("div",{staticClass:"MT_pagination"},[a("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryForm,e.loadData)}}},[e._v("首页")]),a("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryForm,e.loadData)}}},[e._v("尾页")]),a("el-pagination",{attrs:{background:"",total:e.queryForm.total,"current-page":e.queryForm.page,"page-size":e.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryForm,"page",t)},"update:current-page":function(t){return e.$set(e.queryForm,"page",t)},"update:pageSize":function(t){return e.$set(e.queryForm,"size",t)},"update:page-size":function(t){return e.$set(e.queryForm,"size",t)},"current-change":e.loadData}})],1):e._e()],1)],1),a("el-dialog",{attrs:{title:"报警信息",visible:e.detailDialog,width:"35%"},on:{"update:visible":function(t){e.detailDialog=t}}},[a("el-divider"),e.detailData.length?a("el-timeline",{attrs:{reverse:!0}},e._l(e.detailData,(function(t,r){return a("el-timeline-item",{key:r,attrs:{color:t.color}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.handleUsername||"未知"))])]),a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{"margin-left":"40px"}},[e._v(e._s(e.handleState(t.handleState)))])]),a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{"margin-left":"40px"}},[e._v(e._s(e.dateFormat(t.createDatetime)))])])],1)],1)})),1):a("div",[e._v("暂无信息")])],1)],1)},l=[],n=a("60fe"),o={props:["url"],data:function(){return{queryForm:{deviceMac:"",deviceName:"",startDate:"",endDate:"",size:10,page:1,total:"",alarmType:"",handleState:""},tableData:[],detailData:[],selectId:"",detailDialog:!1,alarmTypes:n["a"],handleStates:n["b"]}},computed:{alarmType:function(){var e=this;return function(t){return e.$alarmType(t)}},handleState:function(){var e=this;return function(t){return e.$handleState(t)}},dateFormat:function(){var e=this;return function(t){return e.$moment(t).format("YYYY-MM-DD HH:MM:SS")}}},methods:{alarmDetail:function(e){this.selectId=e,this.searchDetail(e),this.detailDialog=!0},searchDetail:function(e){var t=this;this.httpPost("/device/alarm/detail/"+e,"").then((function(e){e.length&&(e[e.length-1].color="#0bbd87"),t.detailData=e}))},clearAlarm:function(e){var t=this;this.httpPost("/device/alarm/clear/"+e,"").then((function(e){t.$message.success("清除成功"),t.loadData()}))},search:function(){return!this.queryForm.startDate&&this.queryForm.endDate?(this.$message({type:"warning",message:"请选择开始日期!"}),!1):this.queryForm.startDate&&!this.queryForm.endDate?(this.$message({type:"warning",message:"请选择结束日期!"}),!1):(this.queryForm.total="",this.queryForm.page=1,this.count="",void this.loadData())},changeDate:function(e,t){this.queryForm.endDate&&"startDate"===t&&e&&e.getTime()>new Date(this.queryForm.endDate).getTime()?(this.$message.warning("开始时间不得大于结束时间"),this.queryForm.startDate=""):this.queryForm.startDate&&e&&e.getTime()<new Date(this.queryForm.startDate).getTime()&&(this.$message.warning("结束时间不得小于开始时间"),this.queryForm.endDate="")},loadData:function(){var e=this,t=Object.assign({},e.queryForm);t.startDate=t.startDate?e.$moment(t.startDate).format("YYYY-MM-DD"):"",t.endDate=t.endDate?e.$moment(t.endDate).format("YYYY-MM-DD"):"",e.httpGet(e.url,t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},s=o,i=(a("1255"),a("9ca4")),u=Object(i["a"])(s,r,l,!1,null,"cf45e312",null);t["a"]=u.exports}}]);
//# sourceMappingURL=alarm.44cce615.js.map