(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["base"],{"063c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/stockbin"}}},[e._v("料仓管理")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改料仓":"新增料仓"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"编号",prop:"code"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"edit"===e.$route.params.type,size:"small"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:"料仓名称",prop:"name"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"edit"===e.$route.params.type,size:"small"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),"0"===e.ruleForm.specialMaterial?r("el-form-item",{attrs:{label:"下料速度（g/s）",prop:"discharging"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},on:{input:function(t){e.ruleForm.discharging=e.ruleForm.discharging.replace(/[^\d.]/g,"")}},model:{value:e.ruleForm.discharging,callback:function(t){e.$set(e.ruleForm,"discharging",t)},expression:"ruleForm.discharging"}})],1):e._e(),r("el-form-item",{attrs:{label:"报警量",prop:"alarm"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.alarm,callback:function(t){e.$set(e.ruleForm,"alarm",t)},expression:"ruleForm.alarm"}})],1),r("el-form-item",{attrs:{label:"满量值",prop:"full"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.full,callback:function(t){e.$set(e.ruleForm,"full",t)},expression:"ruleForm.full"}})],1),r("el-form-item",{attrs:{label:"特殊材料",required:""}},[r("el-radio-group",{model:{value:e.ruleForm.specialMaterial,callback:function(t){e.$set(e.ruleForm,"specialMaterial",t)},expression:"ruleForm.specialMaterial"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},o=[],i=(r("e18c"),r("1c2e"),{data:function(){return{ruleForm:{code:"",name:"",discharging:"",alarm:"",full:"",specialMaterial:"0"},rules:{code:[{required:!0,message:"请输入编号",trigger:"blur"}],name:[{required:!0,message:"请输入料仓名称",trigger:"blur"}],alarm:[{required:!0,message:"请输入报警量",trigger:"blur"}],full:[{required:!0,message:"请输入满量值",trigger:"blur"}]}}},methods:{saveForm:function(e){var t=this;0!=this.ruleForm.specialMaterial||this.ruleForm.discharging||this.$message.error("非特殊材料请填写下料速度！"),1==this.ruleForm.specialMaterial&&(this.ruleForm.discharging=""),this.$refs[e].validate((function(e){if(!e)return!1;var r=Object.assign({},t.ruleForm);"add"==t.type?t.httpPost("/silo/add",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/stock",query:{}})})).catch((function(){return t.$message.error(res.message),!1})):t.httpPost("/silo/mod",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/stock",query:{}})})).catch((function(){return t.$message.error(res.message),!1}))}))},cancelForm:function(){this.$router.back()}},mounted:function(){var e=this.$route.params;e&&"edit"===e.type?(this.type="edit",this.ruleForm=e.info,this.ruleForm.specialMaterial=e.info.specialMaterial.toString()):this.type="add"}}),s=i,l=(r("6f43"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"526502cf",null);t["default"]=n.exports},"0b0c":function(e,t,r){"use strict";var a=r("bf81"),o=r.n(a);o.a},"0f66":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABKklEQVRYR+2WvY0CMRCFPzISQjKQQCK6awKKgBIoihK4Io4mjugkkCAjJCFERjYy1nhnvBsgIW+02vW89/n5t8ebn14H/wlw8PVT4NhGqwvAHPj1pgtgVwFqAjWBmkBNoCbwEQnMgBtwNvSmzWk4AvrAf9CPj+Mv4M//WAE/CkQpwBLYes1vYO/eYwBHd4pMNYgSgNjcWYxDyumFJG3YBGEFaNSUbkRWCAuAqpW7kqmFgAZg0XiZA+mc0wSaALTap5d2KW0SygGYzdNVkFt1OUEJoMjcCuDaScKX5Fo+jNa5q9GW8aPD2hDEqUgQYWNxZuHdbF4KICUhDZup59JWbNj+H03SJOK6IvM2CQQzCaLYvAtASGLjidaGw0tMuGQSSgID//FqHb+03R3kpWUhsifTXwAAAABJRU5ErkJggg=="},1159:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/staff"}}},[e._v("员工管理")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改员工":"添加员工"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{inline:"",model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"员工姓名",prop:"name"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"员工账号",prop:"account"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),"add"===e.type?r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",size:"small",clearable:""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1):e._e(),r("el-form-item",{attrs:{label:"员工编号",prop:"code"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),r("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"生日",prop:"email"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择出生日期","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},e._l(e.genderOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"备注",prop:"memo"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1),r("el-form-item",{attrs:{label:"角色"}},[r("el-checkbox-group",{model:{value:e.ruleForm.roleList,callback:function(t){e.$set(e.ruleForm,"roleList",t)},expression:"ruleForm.roleList"}},e._l(e.roleList,(function(t,a){return r("el-checkbox",{key:t.id,attrs:{label:t.id,value:t.id}},[e._v(e._s(t.name))])})),1)],1),r("el-form-item",{attrs:{label:" "}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},o=[],i=(r("2eeb"),r("053b"),r("e18c"),r("1c2e"),{data:function(){return{ruleForm:{id:"",name:"",code:"",account:"",password:"",mobile:"",email:"",gender:"",birthday:"",memo:"",enterpriseId:"",enterpriseName:"",roleList:[]},restaurants:[],roleList:[],rules:{name:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],account:[{required:!0,message:"请输入员工账号",trigger:"blur"}],password:[{required:!0,message:"请输入员工密码",trigger:"blur"}],enterpriseName:[{required:!0,message:"请输入所属公司",trigger:"change"}]},genderOptions:[{value:"0",label:"未知的性别"},{value:"1",label:"男性"},{value:"2",label:"女性"},{value:"5",label:"女性改（变）为男性"},{value:"6",label:"男性改（变）为女性"},{value:"9",label:"未说明的性别"}],type:""}},methods:{queryRole:function(){var e=this,t={state:1,size:99,page:1};this.httpPost("/basic/role/query",t).then((function(t){e.roleList=t.rows}))},mustSel:function(){this.ruleForm.enterpriseId||(this.ruleForm.enterpriseName=null)},handleSelect:function(e){this.ruleForm.enterpriseId=e.id,this.ruleForm.enterpriseName=e.name,this.mustSel(),this.queryRole(e.id)},querySearch:function(e,t){var r=this,a={size:10,page:1,total:"",name:e,state:1};this.httpPost("/basic/enterprise/query",a,null,!0).then((function(e){e.rows.map((function(e){e.value=e.name})),r.restaurants=e.rows,t(r.restaurants)}))},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=Object.assign({},t.ruleForm);"add"==t.type?t.httpPost("/basic/employee/add",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/staff",query:{}})})):(r.password="",t.httpPost("/basic/employee/mod/"+r.id,r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/staff",query:{}})})))}))},chooseResource:function(){this.$router.push({path:"/editResource",name:"EditResource",params:{type:"add",info:this.ruleForm}})},cancelForm:function(){this.$router.back()}},watch:{"ruleForm.enterpriseName":function(e,t){e||(this.ruleForm.roleList=[])}},mounted:function(){var e=this,t=this.$getData("staffType");"add"===t?this.type="add":(this.type="edit",this.ruleForm=this.$route.params.info,this.ruleForm.gender=this.ruleForm.gender&&this.ruleForm.gender.toString(),this.ruleForm.birthday=this.ruleForm.birthday&&new Date(this.ruleForm.birthday),this.httpPost("/basic/employee/query/role/"+this.$route.params.info.id,"").then((function(t){e.ruleForm.roleList=t}))),this.queryRole()}}),s=i,l=(r("51d6"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"5d301bf4",null);t["default"]=n.exports},"11e6":function(e,t,r){"use strict";r.r(t);var a,o,i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/alldevice"}}},[e._v("设备管理")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改设备":"新增设备"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{inline:"",model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"设备Mac",prop:"deviceMac"}},[r("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入设备Mac"},model:{value:e.ruleForm.deviceMac,callback:function(t){e.$set(e.ruleForm,"deviceMac",t)},expression:"ruleForm.deviceMac"}})],1),r("el-form-item",{attrs:{label:"设备名称",prop:"name"}},[r("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入设备名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"产品型号",prop:"productId"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{disabled:"edit"===e.$route.params.type,"fetch-suggestions":e.querySearch,placeholder:"请输入选择型号",clearable:""},on:{blur:function(t){return e.mustSel(e.ruleForm.productId,"productName")},select:e.handleSelect},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})],1),r("el-form-item",{attrs:{label:"选择公司",prop:"enterpriseId"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryEnterprise,placeholder:"请输入选择公司",clearable:""},on:{blur:function(t){return e.mustSel(e.ruleForm.enterpriseId,"enterpriseName")},select:e.enterpriseHandleSelect},model:{value:e.enterpriseName,callback:function(t){e.enterpriseName=t},expression:"enterpriseName"}})],1),r("el-form-item",{attrs:{label:"设备地址",prop:"province"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择省区",filterable:"",remote:"",clearable:"","reserve-keyword":""},on:{change:function(t){return e.changeProvince(e.ruleForm.province)}},model:{value:e.ruleForm.province,callback:function(t){e.$set(e.ruleForm,"province",t)},expression:"ruleForm.province"}},e._l(e.provinces,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1)],1),r("el-form-item",{attrs:{label:"城市",prop:"city"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择市区",filterable:"",remote:"",clearable:"","reserve-keyword":""},on:{change:function(t){return e.changeCity(e.ruleForm.city)}},model:{value:e.ruleForm.city,callback:function(t){e.$set(e.ruleForm,"city",t)},expression:"ruleForm.city"}},e._l(e.cities,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1)],1),r("el-form-item",{attrs:{label:"地区/县",prop:"country"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择地区"},on:{change:function(t){return e.changeCountry(e.ruleForm.country)}},model:{value:e.ruleForm.country,callback:function(t){e.$set(e.ruleForm,"country",t)},expression:"ruleForm.country"}},e._l(e.counties,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1)],1),r("el-form-item",{attrs:{label:"详细地址",prop:"deviceAddress"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"300",clearable:"",placeholder:"请填写详细地址"},on:{blur:e.deviceAddress},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.deviceAddress(t)}},model:{value:e.ruleForm.deviceAddress,callback:function(t){e.$set(e.ruleForm,"deviceAddress",t)},expression:"ruleForm.deviceAddress"}})],1),r("div",{staticStyle:{"font-size":"12px",margin:"0 0 10px 100px"}},[e._v("提示：如果定位有误，请拖动蓝色图标到准确位置")]),r("div",{staticStyle:{width:"80%",height:"400px",margin:"0 0 20px 100px"},attrs:{id:"container"}}),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},s=[],l=(r("b4fb"),r("3466"),r("ecb4"),r("2eeb"),r("77ad"),r("053b"),r("e35a"),r("5e9f"),r("0d7a"),r("6a61"),r("cf7f")),n=r("f753"),u=r.n(n),c=r("024c"),d=r.n(c),m={data:function(){return{ruleForm:{deviceMac:"",deviceModel:"",productId:"",name:"",province:"",city:"",country:"",longitude:"",latitude:"",deviceAddress:"",enterpriseId:""},rules:{deviceMac:[{required:!0,message:"请输入设备Mac地址",trigger:"blur"}],productId:[{required:!0,message:"请输入选择型号",trigger:"change"}],enterpriseId:[{required:!0,message:"请输入选择公司",trigger:"change"}],name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],province:[{required:!0,message:"请输入省份",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}],country:[{required:!0,message:"请输入地区",trigger:"blur"}],deviceAddress:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},restaurants:[],productName:"",productId:"",enterpriseName:"",cityData:[],provinces:[],cities:[],counties:[],hideUploadEdit:!1,arriveCoor:[118.644052,32.067512],arrive:"",provinceName:"",cityName:"",countryName:""}},methods:{mustSel:function(e,t){this.$mustSel(this,e,t)},handleSelect:function(e){this.productName=e.name,this.ruleForm.productId=e.id},enterpriseHandleSelect:function(e){this.enterpriseName=e.name,this.ruleForm.enterpriseId=e.id},querySearch:function(e,t){this.associateQuery(e,t,"/product/query/","httpGet")},queryEnterprise:function(e,t){this.associateQuery(e,t,"/basic/enterprise/query","httpPost")},associateQuery:function(e,t,r,a){var o=this,i={size:10,page:1,total:"",state:1,name:e};this[a](r,i,null,!0).then((function(e){e.rows.map((function(e){return e.value=e.name})),o.restaurants=e.rows,t(o.restaurants)}))},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r="add"===t.$route.params.type?"/device/add":"/device/mod/"+t.ruleForm.id,a="add"===t.$route.params.type?"添加成功":"修改成功",o=Object.assign({},t.ruleForm);o.province=t.provinceName,o.city=t.cityName,o.country=t.countryName,t.httpPost(r,o).then((function(e){t.$message.success(a),t.$router.back()}))}))},cancelForm:function(){this.$router.back()},getDictionary:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={parentCode:e},t.next=3,r.httpGet("/dict/query_by_code",a,null,!0);case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})))()},changeProvince:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getDictionary(e,2);case 2:a=r.sent,t.cities=a,t.getCityName(e,2,t.provinces);case 5:case"end":return r.stop()}}),r)})))()},changeCity:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getDictionary(e,3);case 2:a=r.sent,t.counties=a,t.getCityName(e,3,t.cities);case 5:case"end":return r.stop()}}),r)})))()},changeCountry:function(e){this.getCityName(e,1,this.counties)},getCityName:function(e,t,r){var a=r.findIndex((function(t){return t.code===e}));2===t&&(this.provinceName=r[a].name),3===t&&(this.cityName=r[a].name),1===t&&(this.countryName=r[a].name)},deviceAddress:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a,o,i,s,l,n,c,d,m,p,f,h,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,""!==r.ruleForm.deviceAddress){t.next=3;break}return t.abrupt("return");case 3:if(""!==r.provinceName){t.next=5;break}return t.abrupt("return",r.$message.warning("请先选择省份"));case 5:if(""!==r.cityName){t.next=7;break}return t.abrupt("return",r.$message.warning("请先选择城市"));case 7:if(""!==r.countryName){t.next=9;break}return t.abrupt("return",r.$message.warning("请先选择地区"));case 9:return a=r.ruleForm.deviceAddress,a=a.replace(/#/g,"栋"),t.next=13,u.a.get("https://restapi.amap.com/v3/geocode/geo?address=' + ".concat(r.provinceName+r.cityName+r.countryName+r.address," + '&key=630c9b58540b5b07ad9557e3f6c654fa"));case 13:o=t.sent,i="",l="",c="",r.provinceName=i=o.geocodes[0].province,r.cityName=l=o.geocodes[0].city.length>1?o.geocodes[0].city:i,r.countryName=c=o.geocodes[0].district,d=0;case 21:if(!(d<r.provinces.length)){t.next=32;break}if(i!=r.provinces[d].name){t.next=29;break}return s=r.provinces[d].code,r.ruleForm.province=s,t.next=27,r.getDictionary(r.provinces[d].code,2);case 27:m=t.sent,r.cities=m;case 29:d++,t.next=21;break;case 32:p=0;case 33:if(!(p<r.cities.length)){t.next=44;break}if(l!=r.cities[p].name){t.next=41;break}return n=r.cities[p].code,r.ruleForm.city=n,t.next=39,r.getDictionary(r.cities[p].code,3);case 39:f=t.sent,r.counties=f;case 41:p++,t.next=33;break;case 44:for(h=0;h<r.counties.length;h++)c==r.counties[h].name&&(r.ruleForm.country=r.counties[h].code);o.geocodes[0]&&(b=o.geocodes[0].location.split(","),r.arriveCoor=[b[0],b[1]],r.ruleForm.longitude=b[0],r.ruleForm.latitude=b[1],r.mapDraw(r.arriveCoor));case 46:case"end":return t.stop()}}),t)})))()},mapDraw:function(e){var t=this;a=new d.a.Map("container",{resizeEnable:!0,zoom:16,center:this.arriveCoor});d.a.plugin("AMap.ToolBar",(function(){var e=new d.a.ToolBar;a.addControl(e)})),o=new d.a.Marker({icon:"",imageSize:"20px",position:this.arriveCoor,offset:new d.a.Pixel(-13,-30),draggable:!0,cursor:"move",raiseOnDrag:!0}),o.setMap(a),d.a.event.addListener(o,"dragend",function(){var r=Object(l["a"])(regeneratorRuntime.mark((function r(a){var i,s,l,n,c,d,m,p,f,h,b,g,y;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.arriveCoor=[o.getPosition().lng,o.getPosition().lat],r.next=3,u.a.get("https://restapi.amap.com/v3/geocode/regeo?location=".concat(o.getPosition().lng,",").concat(o.getPosition().lat,"&key=630c9b58540b5b07ad9557e3f6c654fa&radius=1000&extensions=all"));case 3:i=r.sent,s="",n="",d="",t.provinceName=s=i.regeocode.addressComponent.province,t.cityName=n=i.regeocode.addressComponent.city.length>1?i.regeocode.addressComponent.city:s,t.countryName=d=i.regeocode.addressComponent.district,m=0;case 11:if(!(m<t.provinces.length)){r.next=22;break}if(s!=t.provinces[m].name){r.next=19;break}return l=t.provinces[m].code,t.ruleForm.province=l,r.next=17,t.getDictionary(t.provinces[m].code,2);case 17:p=r.sent,t.cities=p;case 19:m++,r.next=11;break;case 22:f=0;case 23:if(!(f<t.cities.length)){r.next=34;break}if(n!=t.cities[f].name){r.next=31;break}return c=t.cities[f].code,t.ruleForm.city=c,r.next=29,t.getDictionary(t.cities[f].code,3);case 29:h=r.sent,t.counties=h;case 31:f++,r.next=23;break;case 34:for(b=0;b<t.counties.length;b++)d==t.counties[b].name&&(t.ruleForm.country=t.counties[b].code);g=i.regeocode.formatted_address,y=g.indexOf(t.countryName),t.ruleForm.deviceAddress=g.slice(y+t.countryName.length),i.regeocode.pois[0]&&(t.arriveCoor=i.regeocode.pois[0].location.split(","),t.ruleForm.longitude=e[0],t.ruleForm.latitude=e[1]);case 39:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$route.params.type||e.$router.back(),"edit"===e.$route.params.type&&(r=e.$route.params.info,e.ruleForm=r,e.productName=r.productName,e.enterpriseName=r.enterpriseName,e.provinceName=r.province,e.cityName=r.city,e.countryName=r.country),e.mapDraw(e.arriveCoor),t.next=5,e.getDictionary("system.address",1);case 5:a=t.sent,e.provinces=a;case 7:case"end":return t.stop()}}),t)})))()}},p=m,f=(r("cae6"),r("9ca4")),h=Object(f["a"])(p,i,s,!1,null,"1d6eafd0",null);t["default"]=h.exports},"151f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("料仓管理")])],1)],1),r("el-card",[r("el-form",{ref:"queryForm",staticClass:"form_border",attrs:{model:e.queryForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"料仓名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入料仓名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增料仓")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"code",label:"编号"}}),r("el-table-column",{attrs:{prop:"name",label:"料仓名称"}}),r("el-table-column",{attrs:{prop:"discharging",label:"下料速度(g/s)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.discharging?t.row.discharging:"无")+" ")]}}])}),r("el-table-column",{attrs:{prop:"alarm",label:"报警量"}}),r("el-table-column",{attrs:{prop:"full",label:"满量值"}}),r("el-table-column",{attrs:{label:"特殊材料"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.specialMaterial?r("el-tag",[e._v("是")]):r("el-tag",{attrs:{type:"info"}},[e._v("否")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")])]}}])})],1),e.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryForm,e.loadData)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryForm,e.loadData)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryForm.total,"current-page":e.queryForm.page,"page-size":e.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryForm,"page",t)},"update:current-page":function(t){return e.$set(e.queryForm,"page",t)},"update:pageSize":function(t){return e.$set(e.queryForm,"size",t)},"update:page-size":function(t){return e.$set(e.queryForm,"size",t)},"current-change":e.loadData}})],1):e._e()],1)],1)],1)},o=[],i={data:function(){return{queryForm:{name:"",plateVal:"",size:10,page:1,total:""},tableData:[],options:[],dialogVisible:!1,formLabelWidth:"100px",ruleForm:{discharging:""}}},methods:{search:function(){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editStock",name:"EditStock",params:{type:"add"}})},edit:function(e){this.$router.push({path:"/editStock",name:"EditStock",params:{type:"edit",info:e}})},editdischarging:function(){this.dialogVisible=!0},loadData:function(){var e=this;this.httpGet("/silo/query/",this.queryForm).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},s=i,l=(r("320a"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"6af314d0",null);t["default"]=n.exports},"169a":function(e,t,r){},"19d8":function(e,t,r){"use strict";var a=r("22be"),o=r.n(a);o.a},"20ea":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("员工管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"使用中",name:"inOperation"}},["inOperation"===e.activeName?r("EmployeeTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,edit:e.edit,disable:e.disable}}):e._e()],1),r("el-tab-pane",{attrs:{label:"停用中",name:"outOperation"}},["outOperation"===e.activeName?r("EmployeeTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,enable:e.enable}}):e._e()],1)],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"queryInfo",staticClass:"form_border",attrs:{model:e.queryInfo,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"员工姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入员工姓名",clearable:""},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}})],1),r("el-form-item",{attrs:{label:"员工编号",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入员工编号",clearable:""},model:{value:e.queryInfo.code,callback:function(t){e.$set(e.queryInfo,"code",t)},expression:"queryInfo.code"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增员工")]),e._m(0)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"account",label:"员工账号"}}),r("el-table-column",{attrs:{prop:"name",label:"员工姓名"}}),r("el-table-column",{attrs:{prop:"code",label:"员工编号"}}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"所属企业"}}),r("el-table-column",{attrs:{prop:"mobile",label:"手机号码"}}),r("el-table-column",{attrs:{prop:"openid",label:"公众号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.openid?r("el-link",{attrs:{type:"success",underline:!1}},[e._v("已关注")]):r("el-link",{attrs:{type:"danger",underline:!1}},[e._v("未关注")])]}}])}),r("el-table-column",{attrs:{prop:"memo",label:"备注"}}),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.resetPassDia(t.row)}}},[e._v("重置密码")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.disable(t.row.id)}}},[e._v("停用")]):e._e(),0==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.enable(t.row.id)}}},[e._v("启用")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.transfer(t.row.id)}}},[e._v("设备转移")]):e._e()]}}])})],1),e.queryInfo.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryInfo,e.changePage)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryInfo,e.changePage)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryInfo.total,"current-page":e.queryInfo.page,"page-size":e.queryInfo.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.queryInfo,"size",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"size",t)},"current-change":e.changePage}})],1):e._e(),r("el-dialog",{attrs:{title:"修改密码",visible:e.editPassDialog},on:{"update:visible":function(t){e.editPassDialog=t}}},[r("div",{staticClass:"modal-cont"},[r("el-form",{ref:"modifyForm",attrs:{model:e.modifyForm,rules:e.changeFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"oldPassword",label:"原密码"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{"prefix-icon":"el-icon-user-solid",type:"password",placeholder:"原密码"},model:{value:e.modifyForm.oldPassword,callback:function(t){e.$set(e.modifyForm,"oldPassword",t)},expression:"modifyForm.oldPassword"}})],1),r("el-form-item",{attrs:{prop:"newPassword",label:"新密码"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{type:"password","prefix-icon":"el-icon-shopping-bag-2",placeholder:"新密码"},model:{value:e.modifyForm.newPassword,callback:function(t){e.$set(e.modifyForm,"newPassword",t)},expression:"modifyForm.newPassword"}})],1),r("el-form-item",{attrs:{prop:"reNewPassword",label:"确认密码"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{type:"password","prefix-icon":"el-icon-shopping-bag-2",placeholder:"确认密码"},model:{value:e.modifyForm.reNewPassword,callback:function(t){e.$set(e.modifyForm,"reNewPassword",t)},expression:"modifyForm.reNewPassword"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.modPwd()}}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"重置密码",visible:e.resetPassDialog},on:{"update:visible":function(t){e.resetPassDialog=t}}},[r("div",{staticClass:"modal-cont"},[r("el-form",{ref:"resetForm",attrs:{model:e.resetForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"newPassword",label:"新密码"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{type:"password","prefix-icon":"el-icon-shopping-bag-2",placeholder:"新密码","show-password":""},model:{value:e.resetForm.newPassword,callback:function(t){e.$set(e.resetForm,"newPassword",t)},expression:"resetForm.newPassword"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.resetPwd()}}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"一键转移设备",visible:e.transferDialogVisible,width:"25%"},on:{"update:visible":function(t){e.transferDialogVisible=t}}},[r("el-divider"),r("el-form",{ref:"queryForm",attrs:{model:e.queryForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"选择被移交人",prop:"toUserId"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryEmployee,placeholder:"请输入负责人名称",clearable:""},on:{blur:e.mustSelEmployee,select:e.employeeHandleSelect},model:{value:e.toUserName,callback:function(t){e.toUserName=t},expression:"toUserName"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.transferDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.transferDevice}},[e._v("确 定")])],1)],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])}],l=(r("2eeb"),r("053b"),r("e35a"),r("5e9f"),r("9cf3"),{props:["tableData","queryForm"],data:function(){var e=this,t=function(t,r,a){""===r?a(new Error("请输入密码")):(""!==e.modifyForm.reNewPassword&&e.$refs.modifyForm.validateField("reNewPassword"),a())},r=function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.modifyForm.newPassword?a(new Error("两次输入密码不一致!")):a()};return{selectId:"",resetForm:{newPassword:"888888"},queryInfo:this.queryForm,options:[],enterpriseName:"",restaurants:[],modifyForm:{oldPassword:"",newPassword:"",reNewPassword:""},editPassDialog:!1,resetPassDialog:!1,rules:{newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}]},changeFormRules:{oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{validator:t,trigger:"blur"}],reNewPassword:[{validator:r,trigger:"blur"}]},transferDialogVisible:!1,toUserId:"",toUserName:""}},methods:{transferDevice:function(){var e=this;if(!this.toUserId)return this.$message.error("请选择被移交人");var t={fromUserId:this.selectId,toUserId:this.toUserId};this.httpPost("/device/transfer",t).then((function(t){e.$message.success("移交成功"),e.transferDialogVisible=!1,e.search()}))},transfer:function(e){this.selectId=e,this.toUserId="",this.toUserName="",this.transferDialogVisible=!0},employeeHandleSelect:function(e){this.toUserName=e.code+" - "+e.name,this.toUserId=e.id},mustSelEmployee:function(){this.toUserId||(this.toUserName=null)},queryEmployee:function(e,t){var r=this,a={size:10,page:1,total:"",state:1,name:e};this.httpPost("/basic/employee/query",a,null,!0).then((function(e){e.rows.map((function(e){e.value=e.code+" - "+e.name})),r.restaurants=e.rows,t(r.restaurants)}))},editPassDia:function(e){var t=this;this.selectId=e.id,this.modifyForm={oldPassword:"",newPassword:"",reNewPassword:""},this.editPassDialog=!0,this.$nextTick((function(){t.$refs.modifyForm.resetFields()}))},resetPassDia:function(e){var t=this;this.selectId=e.id,this.resetPassDialog=!0,this.$nextTick((function(){t.$refs.resetForm.resetFields()}))},resetPwd:function(){var e=this;this.$refs["resetForm"].validate((function(t){if(!t)return!1;var r={employeeId:e.selectId,newPassword:e.resetForm.newPassword};e.httpPost("/basic/employee/resetPassword",r).then((function(t){e.$message.success("重置成功"),e.resetPassDialog=!1})).catch((function(t){return e.$message.error(t),!1}))}))},modPwd:function(){var e=this;this.$refs["modifyForm"].validate((function(t){if(!t)return!1;var r={oldPassword:e.modifyForm.oldPassword,newPassword:e.modifyForm.newPassword,reNewPassword:e.modifyForm.reNewPassword};e.httpPost("/basic/employee/modPassword",r).then((function(t){e.$message.success("修改成功"),e.editPassDialog=!1,e.httpPost("/basic/employee/logout",r).then((function(t){e.$sessionData("remove","USER"),e.$router.replace("/login")}))})).catch((function(t){return e.$message.error(t),!1}))}))},changePage:function(){this.$emit("getPage",this.queryInfo.page)},search:function(){this.$emit("getSearch",this.queryInfo)},add:function(){this.$emit("add")},edit:function(e){this.$emit("edit",e)},disable:function(e){this.$emit("disable",e)},enable:function(e){this.$emit("enable",e)},editResource:function(e){this.$emit("editResource",e)}},watch:{},mounted:function(){}}),n=l,u=(r("d4eb"),r("9ca4")),c=Object(u["a"])(n,i,s,!1,null,"5c1f852b",null),d=c.exports,m={components:{EmployeeTable:d},data:function(){return{activeName:"inOperation",queryForm:{name:"",code:"",enterpriseId:"",state:1,size:10,page:1,total:""},tableData:[],formLabelWidth:"120px"}},methods:{getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(e){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editEmployee",name:"EditEmployee",params:{type:"add"}}),this.$setData("staffType","add")},edit:function(e){this.$router.push({path:"/editEmployee",name:"EditEmployee",params:{type:"edit",info:e}}),this.$setData("staffType","edit")},disable:function(e){var t=this;this.$confirm("确定停用该账号?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/employee/disable/"+e,"").then((function(e){t.$message({type:"success",message:"停用成功!"}),t.handleClick()}))})).catch((function(){}))},enable:function(e){var t=this;this.$confirm("确定启用该账号?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/employee/enable/"+e,"").then((function(e){t.$message({type:"success",message:"启用成功!"}),t.handleClick()}))})).catch((function(){}))},handleClick:function(e,t){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.state="inOperation"===this.activeName?1:0,this.httpPost("/basic/employee/query",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},p=m,f=Object(u["a"])(p,a,o,!1,null,"75978b8c",null);t["default"]=f.exports},"213f":function(e,t,r){},"22aa":function(e,t,r){},"22be":function(e,t,r){},2541:function(e,t,r){},2747:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/good"}}},[e._v("商品管理")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改商品":"添加商品"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"商品中文名",prop:"name"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",maxlength:"6","show-word-limit":""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"商品英文名",prop:"englishName"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.englishName,callback:function(t){e.$set(e.ruleForm,"englishName",t)},expression:"ruleForm.englishName"}})],1),r("el-form-item",{attrs:{label:"商品图片",prop:"fileListMain"}},[r("el-upload",{ref:"uploadMainPicture",staticClass:"picMain",attrs:{multiple:"",limit:1,"file-list":e.ruleForm.fileListMain,"list-type":"picture-card",action:e.uploadActionMain(),"on-remove":e.handleRemoveMain,"on-success":e.uploadSuccessMain,"before-upload":e.beforeUpload}},[r("i",{staticClass:"el-icon-plus"})]),r("div",{staticClass:"font_size"})],1),r("el-form-item",{attrs:{label:"商品详情图",prop:"fileList"}},[r("el-upload",{ref:"uploadPictures",staticClass:"pics",attrs:{"file-list":e.ruleForm.fileList,multiple:"",limit:5,"list-type":"picture-card",action:e.uploadAction(),"on-remove":e.handleRemove,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload}},[r("i",{staticClass:"el-icon-plus"})]),r("div",{staticClass:"font_size"})],1),r("el-form-item",{attrs:{label:"冷热选择",prop:"drinkType"}},[r("el-radio-group",{model:{value:e.ruleForm.drinkType,callback:function(t){e.$set(e.ruleForm,"drinkType",t)},expression:"ruleForm.drinkType"}},[r("el-radio",{attrs:{label:"2"}},[e._v("冷饮")]),r("el-radio",{attrs:{label:"1"}},[e._v("热饮")]),r("el-radio",{attrs:{label:"0"}},[e._v("全部")])],1)],1),r("el-form-item",{attrs:{label:"零售价(元)",prop:"sellPrice"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{type:"text",oninput:"value=value.replace(/[^\\d.]/g,'')",placeholder:""},model:{value:e.ruleForm.sellPrice,callback:function(t){e.$set(e.ruleForm,"sellPrice",t)},expression:"ruleForm.sellPrice"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{rows:4,type:"textarea",placeholder:"请输入内容",maxlength:"30","show-word-limit":""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},o=[],i=(r("fe59"),r("9302"),r("2eeb"),r("ea69"),r("e18c"),r("e35a"),r("1c2e"),r("0d7a"),r("08ba"),{data:function(){return{ruleForm:{name:"",englishName:"",sellPrice:"",remark:"",fileListMain:[],fileList:[],picture:"",pictureDetail:"",drinkType:"0"},rules:{name:[{required:!0,message:"请输入商品中文名",trigger:"blur"}],englishName:[{required:!0,message:"请输入商品英文名",trigger:"blur"}],fileListMain:[{required:!0,message:"请上传商品图片",trigger:"blur"}],fileList:[{required:!0,message:"请上传商品详情图",trigger:"blur"}],drinkType:[{required:!0,message:"请选择饮品温度",trigger:"blur"}],sellPrice:[{required:!0,message:"请输入商品零售价",trigger:"blur"}]},uploadImgMain:!1,options:[]}},methods:{handleImgClose:function(e){this.$refs.upload.clearFiles(),e()},handleRemoveMain:function(e,t){if(t.length!=this.ruleForm.fileListMain.length){for(var r=e.response.data.fileName,a=null,o=0,i=this.ruleForm.fileListMain.length;o<i;o++)if(this.ruleForm.fileListMain[o].response.data.fileName===r){a=o;break}this.ruleForm.fileListMain.splice(a,1)}t.length<5&&(document.querySelector(".picMain .el-upload--picture-card").style.display="block")},handleRemove:function(e,t){if(t.length!=this.ruleForm.fileList.length){for(var r=e.response.data.fileName,a=null,o=0,i=this.ruleForm.fileListMain.length;o<i;o++)if(this.ruleForm.fileListMain[o].response.data.fileName===r){a=o;break}this.ruleForm.fileList.splice(a,1)}t.length<5&&(document.querySelector(".pics .el-upload--picture-card").style.display="block")},uploadSuccessMain:function(e,t,r){this.ruleForm.fileListMain=r,this.ruleForm.fileListMain.length>=1&&(document.querySelector(".picMain .el-upload--picture-card").style.display="none")},uploadSuccess:function(e,t,r){this.ruleForm.fileList=r,this.ruleForm.fileList.length>=5&&(document.querySelector(".pics .el-upload--picture-card").style.display="none")},beforeUpload:function(){this.ruleForm.fileList.length>=5&&(document.querySelector(".pics .el-upload--picture-card").style.display="none"),this.ruleForm.fileListMain.length>=1&&(document.querySelector(".picMain .el-upload--picture-card").style.display="none")},uploadAction:function(){return this.$picUpload},uploadActionMain:function(){return this.$picUpload},beforeAvatarUpload:function(e){this.isUpload=!0;var t="image/jpeg"===e.type||"image/png",r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG / png 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=Object.assign({},t.ruleForm);r["fileList"]&&r["fileList"].length>0?r["pictureDetail"]=JSON.stringify(r["fileList"].map((function(e){return e.response.data.fileName})).join(",").split(",")).toString():delete r["pictureDetail"],r["fileListMain"]&&r["fileListMain"].length>0?r["picture"]=JSON.stringify(r["fileListMain"].map((function(e){return e.response.data.fileName})).join(",").split(",")).toString():delete r["picture"],"add"==t.type?t.httpPost("/item/add",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/good",query:{}})})).catch((function(){return t.$message.error(res.message),!1})):t.httpPost("/item/mod/"+r.id,r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/good",query:{}})})).catch((function(){return t.$message.error(res.message),!1}))}))},cancelForm:function(){this.$router.back()}},mounted:function(){var e=this;if("add"===this.$route.params.type)this.type="add";else{var t=this.$route.params.info;this.type="edit",this.ruleForm=this.$route.params.info,this.ruleForm.fileListMain=[],this.ruleForm.fileList=[],this.ruleForm.drinkType=t.drinkType.toString(),t["picture"]&&(JSON.parse(t["picture"]).forEach((function(t){return e.ruleForm.fileListMain.push({response:{data:{fileName:t}},url:e.$picDownload+t})})),this.ruleForm.fileListMain.length>=1&&(document.querySelector(".picMain .el-upload--picture-card").style.display="none")),t["pictureDetail"]&&(JSON.parse(t["pictureDetail"]).forEach((function(t){return e.ruleForm.fileList.push({response:{data:{fileName:t}},url:e.$picDownload+t})})),this.ruleForm.fileList.length>=5&&(document.querySelector(".pics .el-upload--picture-card").style.display="none"))}}}),s=i,l=(r("bb1a"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"7bb39592",null);t["default"]=n.exports},"29ec":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("资源管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"使用中",name:"inOperation"}},[r("ResourceTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,edit:e.edit,disable:e.disable}})],1),r("el-tab-pane",{attrs:{label:"停用中",name:"outOperation"}},[r("ResourceTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,enable:e.enable}})],1)],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"queryInfo",staticClass:"form_border",attrs:{model:e.queryInfo,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}})],1),r("el-form-item",{attrs:{label:"资源编号",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入资源编号"},model:{value:e.queryInfo.code,callback:function(t){e.$set(e.queryInfo,"code",t)},expression:"queryInfo.code"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增资源")]),e._m(0)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"name",label:"资源名称"}}),r("el-table-column",{attrs:{prop:"code",label:"资源编码"}}),r("el-table-column",{attrs:{prop:"defaultAssign",label:"默认勾选"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.defaultAssign?"否":"是")+" ")]}}])}),r("el-table-column",{attrs:{prop:"parentName",label:"父级资源"}}),r("el-table-column",{attrs:{prop:"href",label:"资源地址"}}),r("el-table-column",{attrs:{prop:"memo",label:"资源描述"}}),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.disable(t.row.id)}}},[e._v("停用")]):e._e(),0==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.enable(t.row.id)}}},[e._v("启用")]):e._e()]}}])})],1),e.queryInfo.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryInfo,e.changePage)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryInfo,e.changePage)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryInfo.total,"current-page":e.queryInfo.page,"page-size":e.queryInfo.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.queryInfo,"size",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"size",t)},"current-change":e.changePage}})],1):e._e()],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])}],l={props:["tableData","queryForm"],data:function(){return{queryInfo:this.queryForm}},methods:{changePage:function(){this.$emit("getPage",this.queryInfo.page)},search:function(){this.$emit("getSearch",this.queryInfo)},add:function(){this.$emit("add")},edit:function(e){this.$emit("edit",e)},disable:function(e){this.$emit("disable",e)},enable:function(e){this.$emit("enable",e)}},watch:{},mounted:function(){}},n=l,u=r("9ca4"),c=Object(u["a"])(n,i,s,!1,null,"ba1d519a",null),d=c.exports,m={components:{ResourceTable:d},data:function(){return{activeName:"inOperation",queryForm:{name:"",code:"",state:1,size:10,page:1,total:""},tableData:[],formLabelWidth:"120px"}},methods:{getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(e){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editResources",name:"EditResources",params:{type:"add"}})},edit:function(e){this.$router.push({path:"/editResources",name:"EditResources",params:{type:"edit",info:e}})},disable:function(e){var t=this;this.$confirm("确定停用该资源?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/resource/disable/"+e,"").then((function(e){t.$message({type:"success",message:"停用成功!"}),t.loadData()}))})).catch((function(){}))},enable:function(e){var t=this;this.$confirm("确定启用该资源?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/resource/enable/"+e,"").then((function(e){t.$message({type:"success",message:"启用成功!"}),t.loadData()}))})).catch((function(){}))},handleClick:function(e,t){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.state="inOperation"===this.activeName?1:0,this.httpPost("/basic/resource/query",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},p=m,f=(r("0b0c"),Object(u["a"])(p,a,o,!1,null,"4129df52",null));t["default"]=f.exports},"2c6f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/product"}}},[e._v("产品管理")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改产品":"新增产品"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"产品编号",prop:"code"}},[r("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入产品编号"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[r("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入产名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"产品造价(元)",prop:"sellPrice"}},[r("el-input",{attrs:{type:"text",placeholder:"",clearable:"",placeholder:"请输入产品价格"},on:{input:function(t){e.ruleForm.price=e.ruleForm.price.replace(/[^\d.]/g,"")}},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),r("el-form-item",{staticClass:"stock_cont",attrs:{label:"消杀时间"}},[e._l(e.ruleForm.uvTime,(function(t,a){return r("div",{staticClass:"row_item"},[r("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:59"},placeholder:"开始时间"},model:{value:t.start,callback:function(r){e.$set(t,"start",r)},expression:"item.start"}}),r("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:59",minTime:t.start},placeholder:"结束时间"},model:{value:t.end,callback:function(r){e.$set(t,"end",r)},expression:"item.end"}}),r("el-link",{class:1===e.ruleForm.uvTime.length?"hidden":"",staticStyle:{"margin-left":"10px"},attrs:{underline:!1,type:"primary"},on:{click:function(t){return t.stopPropagation(),e.del(a)}}},[e._v("删除")])],1)})),r("div",[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){return t.stopPropagation(),e.addVuTime(t)}}},[e._v("新增消杀时间")])],1)],2),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",maxlength:"255","show-word-limit":""},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1),r("el-form-item",["edit"!==e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("下一步")]):e._e(),"edit"===e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("确定")]):e._e(),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},o=[],i=(r("ea69"),{data:function(){return{ruleForm:{},rules:{name:[{required:!0,message:"请输入产品名称",trigger:"blur"}],code:[{required:!0,message:"请输入产品编码",trigger:"blur"}]}}},methods:{addVuTime:function(){this.ruleForm.uvTime.push({start:"",end:""})},del:function(e){this.ruleForm.uvTime.splice(e,1)},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=Object.assign({},t.ruleForm);r.uvTime=JSON.stringify(r.uvTime),"add"==t.type?t.httpPost("/product/add",r).then((function(e){t.ruleForm.productId=e.productId,t.$message.success("设置成功"),t.$router.push({path:"/blender",name:"Blender",params:{type:"add",productId:e.productId,info:t.ruleForm}})})).catch((function(){return!1})):"pre"==t.type?t.httpPost("/product/mod/"+r.productId,r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/blender",name:"Blender",params:{type:"add",productId:r.productId,info:t.ruleForm}})})).catch((function(){return!1})):t.httpPost("/product/mod/"+r.id,r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/product"})})).catch((function(){return!1}))}))},cancelForm:function(){this.$router.push({path:"/product"})}},mounted:function(){if(this.ruleForm=this.$route.params.info,"add"===this.$route.params.type)this.type="add";else if("edit"===this.$route.params.type)this.type="edit",this.ruleForm.uvTime=JSON.parse(this.ruleForm.uvTime);else{if("pre"!==this.$route.params.type)return void this.$router.push({path:"/product"});this.ruleForm.uvTime=JSON.parse(this.ruleForm.uvTime),this.type="pre"}}}),s=i,l=(r("d7f2"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"776ab69c",null);t["default"]=n.exports},"2e0b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品设置")])],1)],1),a("el-card",[a("div",{staticClass:"MT_table_cont"},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增商品")]),a("div",{staticClass:"btn_cont"},[a("div",{staticClass:"choose_btn _color"})])],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-key":"id"}},[a("el-table-column",{attrs:{label:"缩略图"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{attrs:{width:"60",src:e.imgPath(t.row.picture),alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品名称（中）"}}),a("el-table-column",{attrs:{prop:"englishName",label:"商品名称（英）"}}),a("el-table-column",{attrs:{prop:"sellPrice",label:"商品零售价"}}),a("el-table-column",{attrs:{prop:"remark",label:"商品备注"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]),1===t.row.state?a("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.disable(t.row.id)}}},[e._v("停用")]):e._e(),0===t.row.state?a("el-link",{attrs:{underline:!1,type:"success"},on:{click:function(r){return r.stopPropagation(),e.enable(t.row.id)}}},[e._v("启用")]):e._e()]}}])})],1)],1),a("div",{staticClass:"fn_btn"},["add"===e.$route.params.type?a("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("上一步")]):e._e(),"add"===e.$route.params.type?a("el-button",{attrs:{type:"primary"},on:{click:e.toProduct}},[e._v("完成")]):e._e(),"edit"===e.$route.params.type?a("el-button",{attrs:{type:"primary"},on:{click:e.toProduct}},[e._v("返回")]):e._e()],1),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-divider"),a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"60px"}},[a("el-form-item",{staticClass:"itemName",attrs:{label:"商品",required:""}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入后选择商品名称",clearable:""},on:{blur:e.mustSel,change:e.handleChange,select:e.handleSelect},model:{value:e.ruleForm.itemName,callback:function(t){e.$set(e.ruleForm,"itemName",t)},expression:"ruleForm.itemName"}})],1),a("el-form-item",{staticClass:"stock_cont",attrs:{label:"料仓名"}},[e._l(e.ruleForm.processList,(function(t,o){return a("div",{staticClass:"row_item"},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("顺序："+e._s(o+1))]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.storageId,callback:function(r){e.$set(t,"storageId",r)},expression:"item.storageId"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-form-item",{staticClass:"name",attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"延时(s)",prop:"delay"}},[a("el-input",{attrs:{size:"small"},on:{input:function(e){t.delay=t.delay.replace(/[^\d.]/g,"")}},model:{value:t.delay,callback:function(r){e.$set(t,"delay",r)},expression:"item.delay"}})],1),a("el-form-item",{attrs:{label:"水量(s)",prop:"waterOut"}},[a("el-input",{attrs:{size:"small"},on:{input:function(e){t.waterOut=t.waterOut.replace(/[^\d.]/g,"")}},model:{value:t.waterOut,callback:function(r){e.$set(t,"waterOut",r)},expression:"item.waterOut"}})],1),a("el-form-item",{attrs:{label:"下料(s)",prop:"stuffOut"}},[a("el-input",{attrs:{size:"small"},on:{input:function(e){t.stuffOut=t.stuffOut.replace(/[^\d.]/g,"")}},model:{value:t.stuffOut,callback:function(r){e.$set(t,"stuffOut",r)},expression:"item.stuffOut"}})],1),a("el-form-item",{attrs:{label:"搅拌(s)",prop:"blender"}},[a("el-input",{attrs:{size:"small"},on:{input:function(e){t.blender=t.blender.replace(/[^\d.]/g,"")}},model:{value:t.blender,callback:function(r){e.$set(t,"blender",r)},expression:"item.blender"}})],1),a("el-link",{class:1===e.ruleForm.processList.length?"hidden":"",staticStyle:{"margin-left":"10px"},attrs:{underline:!1,type:"primary"},on:{click:function(t){return t.stopPropagation(),e.del(o)}}},[e._v("删除")]),a("div",{class:["move_btn",1===e.ruleForm.processList.length?"hidden":""]},[a("i",{attrs:{disabled:0===o},on:{click:function(t){return e.$toTop(o,e.ruleForm.processList)}}},[a("img",{attrs:{src:r("7e79")}})]),a("i",{attrs:{disabled:0===o},on:{click:function(t){return e.$toPrev(o,e.ruleForm.processList)}}},[a("img",{attrs:{src:r("b1d2")}})]),a("i",{attrs:{disabled:o===e.ruleForm.processList.length-1},on:{click:function(t){return e.$toNext(o,e.ruleForm.processList)}}},[a("img",{attrs:{src:r("0f66")}})]),a("i",{attrs:{disabled:o===e.ruleForm.processList.length-1},on:{click:function(t){return e.$toBottom(o,e.ruleForm.processList)}}},[a("img",{attrs:{src:r("6f1b")}})])])],1)})),a("div",[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){return t.stopPropagation(),e.addStorage(t)}}},[e._v("新增料仓")])],1)],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editItem("ruleForm")}}},[e._v("确 定")])],1)],1)],1)],1)},o=[],i=(r("2eeb"),r("ea69"),r("053b"),{data:function(){return{ruleForm:{productId:"",itemId:"",itemName:"",processList:[{delay:0,waterOut:0,stuffOut:0,blender:0,storageId:"",sequence:"",name:""}]},options:[],tableData:[],restaurants:[],dialogVisible:!1,formLabelWidth:"100px",title:"",rules:{}}},methods:{mustSel:function(){this.ruleForm.itemId||(this.ruleForm.itemName=null)},disable:function(e){var t=this;this.$confirm("是否确认停用当前饮品？","提醒",{type:"warning"}).then((function(){t.httpPost("/product/item/disable/"+e,"").then((function(e){t.$message({type:"success",message:"停用成功!"}),t.loadData()}))})).catch((function(){}))},enable:function(e){var t=this;this.$confirm("是否确认启用当前饮品？","提醒",{type:"warning"}).then((function(){t.httpPost("/product/item/enable/"+e,"").then((function(e){t.$message({type:"success",message:"启用成功!"}),t.loadData()}))})).catch((function(){}))},del:function(e){this.ruleForm.processList.splice(e,1)},addStorage:function(){this.ruleForm.processList.push({delay:0,waterOut:0,stuffOut:0,blender:0,storageId:"",value:"1",sequence:"",name:""})},handleSelect:function(e){this.ruleForm.itemId=e.id,this.ruleForm.itemName=e.name},handleChange:function(e){},querySearch:function(e,t){var r=this,a={size:10,page:1,total:"",name:e,state:1};this.httpGet("/item/query",a,null,!0).then((function(e){e.rows.map((function(e){e.value=e.name})),r.restaurants=e.rows,t(r.restaurants)}))},imgPath:function(e){return e?this.$picDownload+e.substring(2,e.length-2):""},cancelForm:function(){this.$router.push({path:"/storage",name:"Storage",params:{type:"add",productId:this.ruleForm.productId,info:this.$route.params.info}})},toProduct:function(){this.$router.push({path:"/product"})},toProductGood:function(){this.$router.push({path:"/productGood",name:"ProductGood",params:{type:"add",info:this.$route.params.info}})},loadData:function(){var e=this;this.httpPost("/product/item/query/"+this.ruleForm.productId,"").then((function(t){e.tableData=t}))},storageQuery:function(){var e=this;this.httpGet("/product/storage/query/"+this.ruleForm.productId,"").then((function(t){e.options=t}))},add:function(){this.title="新增商品",this.dialogVisible=!0,this.ruleForm={itemId:"",itemName:"",productId:this.$route.params.productId,processList:[{delay:0,waterOut:0,stuffOut:0,blender:0,sequence:"",storageId:"",name:""}]}},edit:function(e){var t=this;this.title="修改商品",this.httpGet("/product/item/"+e.id,"").then((function(e){t.ruleForm={productId:e.productId,itemId:e.itemId,itemName:e.name,processList:e.processList}})),this.dialogVisible=!0},editItem:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;for(var r=0;r<t.ruleForm.processList.length;r++)t.ruleForm.processList[r].sequence=r+1;if(!t.ruleForm.itemName)return t.$message.warning("请输入后选择商品名称"),!1;"新增商品"==t.title?t.httpPost("/product/item/edit",t.ruleForm).then((function(e){t.$message({type:"success",message:"增加成功!"}),t.dialogVisible=!1,t.loadData()})):t.httpPost("/product/item/edit",t.ruleForm).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.dialogVisible=!1,t.loadData()}))}))},resetForm:function(e){this.dialogVisible=!1}},mounted:function(){if(this.ruleForm={productId:"",id:"",code:"",name:"",memo:"",blenderId:"",speed:"",alarm:"",full:""},this.ruleForm.productId=this.$route.params.productId,"add"===this.$route.params.type)this.type="add";else{if("edit"!==this.$route.params.type)return void this.$router.push({path:"/product"});this.type="edit"}this.storageQuery(),this.loadData()}}),s=i,l=(r("19d8"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"1ac89d7f",null);t["default"]=n.exports},"30de":function(e,t,r){},"320a":function(e,t,r){"use strict";var a=r("feff"),o=r.n(a);o.a},3466:function(e,t,r){"use strict";var a=r("1c8b"),o=r("5dfd").findIndex,i=r("258f"),s=r("ff9c"),l="findIndex",n=!0,u=s(l);l in[]&&Array(1)[l]((function(){n=!1})),a({target:"Array",proto:!0,forced:n||!u},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(l)},"38fb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/role"}}},[e._v("角色管理")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改角色":"添加角色"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"memo"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1),r("el-form-item",{attrs:{label:"资源列表",prop:"resourceList"}},[r("el-tree",{ref:"tree",attrs:{data:e.rightList,"show-checkbox":"","node-key":"id","default-checked-keys":e.checkList,props:e.defaultProps,"default-expand-all":"","check-on-click-node":""},on:{check:e.checkChange}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},o=[],i=(r("ea69"),{data:function(){return{ruleForm:{id:"",name:"",code:"",resourceList:[],memo:""},restaurants:[],rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],code:[{required:!0,message:"请输入角色编码",trigger:"blur"}]},defaultProps:{children:"childNode",label:"name"},rightList:[],checkList:[],checkListAll:""}},methods:{checkChange:function(e,t){this.checkList=t.checkedKeys,this.checkListAll=this.$roleJoin(t.checkedNodes)},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.ruleForm.resourceList=t.checkListAll;var r=Object.assign({},t.ruleForm);"add"==t.type?t.httpPost("/basic/role/add",r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/role",query:{}})})).catch((function(){return t.$message.error(res.message),!1})):t.httpPost("/basic/role/mod/"+r.id,r).then((function(e){t.$message.success("设置成功"),t.$router.push({path:"/role",query:{}})})).catch((function(){return t.$message.error(res.message),!1}))}))},chooseResource:function(){this.$router.push({path:"/editResource",name:"EditResource",params:{type:"add",info:this.ruleForm}})},cancelForm:function(){this.$router.back()}},mounted:function(){var e=this;if(!this.$route.params.type)return this.$router.back();var t={state:1,size:999,page:1,total:""};this.httpPost("/basic/resource/query",t).then((function(t){for(var r=[],a=0;a<t.rows.length;a++)0==t.rows[a].parentId&&(t.rows[a].childNode=[],r.push(t.rows[a]));for(var o=e.$sessionData("get","USER"),i=0;i<r.length;i++)for(var s=0;s<o.resourceList.length;s++)r[i].id==o.resourceList[s].parentId&&r[i].childNode.push(o.resourceList[s]);for(a=1;a<r.length;a++)0==r[a].childNode.length&&(r.splice(a,1),a--);var l=Object.assign([],r);e.menuArr=Object.assign([],r),e.rightList=l})),this.ruleForm=this.$route.params.info,this.checkList=this.$route.params.info.resourceList,"add"===this.$route.params.type?this.type="add":(this.type="edit",this.ruleForm=this.$route.params.info,this.httpPost("/basic/role/query/resource/"+this.$route.params.info.id,"").then((function(t){e.checkList=t,e.ruleForm.resourceList=t})))}}),s=i,l=(r("4cab"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"9dcfc37e",null);t["default"]=n.exports},"3dfd":function(e,t,r){},4652:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("角色管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"使用中",name:"inOperation"}},[r("RoleTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,edit:e.edit,disable:e.disable}})],1),r("el-tab-pane",{attrs:{label:"停用中",name:"outOperation"}},[r("RoleTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,enable:e.enable}})],1)],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"queryInfo",staticClass:"form_border",attrs:{model:e.queryInfo,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}})],1),r("el-form-item",{attrs:{label:"角色编号",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入角色编号"},model:{value:e.queryInfo.code,callback:function(t){e.$set(e.queryInfo,"code",t)},expression:"queryInfo.code"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增角色")]),e._m(0)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"code",label:"角色编码"}}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"所属企业"}}),r("el-table-column",{attrs:{prop:"memo",label:"角色描述"}}),r("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.disable(t.row.id)}}},[e._v("停用")]):e._e(),0==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.enable(t.row.id)}}},[e._v("启用")]):e._e()]}}])})],1),e.queryInfo.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryInfo,e.changePage)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryInfo,e.changePage)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryInfo.total,"current-page":e.queryInfo.page,"page-size":e.queryInfo.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.queryInfo,"size",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"size",t)},"current-change":e.changePage}})],1):e._e()],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])}],l=(r("2eeb"),r("053b"),{props:["tableData","queryForm"],data:function(){return{queryInfo:this.queryForm,enterpriseName:"",restaurants:[]}},methods:{mustSel:function(){this.queryForm.enterpriseId||(this.enterpriseName=null)},handleSelect:function(e){this.queryForm.enterpriseId=e.id,this.enterpriseName=e.name,this.mustSel()},querySearch:function(e,t){var r=this,a={size:10,page:1,total:"",name:e,state:1};this.httpPost("/basic/enterprise/query",a,null,!0).then((function(e){e.rows.map((function(e){e.value=e.name})),r.restaurants=e.rows,t(r.restaurants)}))},changePage:function(){this.$emit("getPage",this.queryInfo.page)},search:function(){this.$emit("getSearch",this.queryInfo)},add:function(){this.$emit("add")},edit:function(e){this.$emit("edit",e)},disable:function(e){this.$emit("disable",e)},enable:function(e){this.$emit("enable",e)}},watch:{},mounted:function(){}}),n=l,u=r("9ca4"),c=Object(u["a"])(n,i,s,!1,null,"05a10d31",null),d=c.exports,m={components:{RoleTable:d},data:function(){return{activeName:"inOperation",queryForm:{name:"",code:"",enterpriseId:"",state:1,size:10,page:1,total:""},tableData:[],formLabelWidth:"120px"}},methods:{getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(e){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){var e={id:"",name:"",code:"",enterpriseName:"",enterpriseId:"",resourceList:[],memo:""};this.$router.push({path:"/editRole",name:"EditRole",params:{type:"add",info:e}})},edit:function(e){this.$router.push({path:"/editRole",name:"EditRole",params:{type:"edit",info:e}})},disable:function(e){var t=this;this.$confirm("确定停用该角色?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/role/disable/"+e,"").then((function(e){t.$message({type:"success",message:"停用成功!"}),t.handleClick()}))})).catch((function(){}))},enable:function(e){var t=this;this.$confirm("确定启用该角色?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/role/enable/"+e,"").then((function(e){t.$message({type:"success",message:"启用成功!"}),t.handleClick()}))})).catch((function(){}))},handleClick:function(e,t){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.state="inOperation"===this.activeName?1:0,this.httpPost("/basic/role/query",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},p=m,f=Object(u["a"])(p,a,o,!1,null,"20adf43f",null);t["default"]=f.exports},"4cab":function(e,t,r){"use strict";var a=r("ec11"),o=r.n(a);o.a},"4dfe":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"queryForm",staticClass:"form_border",attrs:{model:e.queryForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"MAC地址",prop:"deviceMac"}},[r("el-input",{attrs:{placeholder:"请输入MAC地址"},model:{value:e.queryForm.deviceMac,callback:function(t){e.$set(e.queryForm,"deviceMac",t)},expression:"queryForm.deviceMac"}})],1),r("el-form-item",{attrs:{label:"产品型号",prop:"productId"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入选择型号",clearable:""},on:{blur:function(t){return e.mustSel(e.queryForm.productId,"productName")},select:e.handleSelect},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})],1),r("el-form-item",{attrs:{label:"在线状态",prop:"online"}},[r("el-select",{attrs:{placeholder:"请选择启用状态"},model:{value:e.queryForm.online,callback:function(t){e.$set(e.queryForm,"online",t)},expression:"queryForm.online"}},[r("el-option",{attrs:{label:"全部",value:""}}),r("el-option",{attrs:{label:"在线",value:"1"}}),r("el-option",{attrs:{label:"离线",value:"0"}})],1)],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[e.queryForm.isAll?r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.addDevice(t)}}},[e._v("新增设备")]),e._m(0)],1):e._e(),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{label:"MAC地址",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{ref:"deviceMac"},[e._v(e._s(t.row.deviceMac))])]}}])}),r("el-table-column",{attrs:{label:"名称",prop:"name",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name?t.row.name:"无")+" ")]}}])}),r("el-table-column",{attrs:{label:"负责人",prop:"employeeName",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",[e._v(e._s(t.row.employeeName?t.row.employeeName:"无"))])]}}])}),r("el-table-column",{attrs:{prop:"alarm",label:"报警",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.alarm?r("el-link",{attrs:{type:"success",underline:!1}},[e._v("无报警")]):r("el-link",{attrs:{type:"danger"},on:{click:function(r){return e.alarmDevice(t.row)}}},[e._v("报警中")])]}}])}),r("el-table-column",{attrs:{label:"产品型号",prop:"productName"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.productName?t.row.productName:"无")+" ")]}}])}),r("el-table-column",{attrs:{prop:"deviceAddress",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.deviceAddress?t.row.deviceAddress:"无")+" ")]}}])}),e.queryForm.isAll?r("el-table-column",{attrs:{prop:"enterpriseName",label:"所属公司"}}):e._e(),r("el-table-column",{attrs:{prop:"sellAmount",label:"销售金额",width:"120"}}),r("el-table-column",{attrs:{prop:"refundAmount",label:"退款金额",width:"120"}}),r("el-table-column",{attrs:{prop:"orderCount",label:"订单数",width:"120"}}),r("el-table-column",{attrs:{label:"是否在线",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.online?r("el-tag",[e._v("在线")]):r("el-tag",{attrs:{type:"info"}},[e._v("离线")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.queryForm.isAll?e._e():r("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(r){return e.editEmployee(t.row)}}},[e._v("负责人")]),e.queryForm.isAll?r("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(r){return e.editDevice(t.row)}}},[e._v("修改")]):e._e(),r("el-popover",{attrs:{placement:"right",width:"300",trigger:"click"}},[r("p",[e._v("确定"+e._s(1===t.row.enable?"停用":"启用")+"此设备？")]),r("div",[e._v(e._s(t.row.plateTitle))]),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.cancelInput(t.row.id)}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.putaway(t.row.enable,t.row.id)}}},[e._v("确定")])],1),1===t.row.enable?r("el-link",{attrs:{slot:"reference",type:"primary",underline:!1},slot:"reference"},[r("i",{staticStyle:{color:"#f00"}},[e._v("停用")])]):r("el-link",{attrs:{slot:"reference",type:"primary",underline:!1},slot:"reference"},[e._v("启用")])],1)]}}])})],1),e.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryForm,e.changePage)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryForm,e.changePage)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryForm.total,"current-page":e.queryForm.page,"page-size":e.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryForm,"page",t)},"update:current-page":function(t){return e.$set(e.queryForm,"page",t)},"update:pageSize":function(t){return e.$set(e.queryForm,"size",t)},"update:page-size":function(t){return e.$set(e.queryForm,"size",t)},"current-change":e.changePage}})],1):e._e()],1),r("el-dialog",{attrs:{title:"修改设备归属",visible:e.dialogVisible,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-divider"),r("el-form",{ref:"queryForm",attrs:{model:e.queryForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"选择公司",prop:"enterpriseId"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryEnterprise,placeholder:"请输入公司名称",clearable:""},on:{blur:function(t){return e.mustSel(e.queryForm.enterpriseId,"enterpriseName")},select:e.enterpriseHandleSelect},model:{value:e.enterpriseName,callback:function(t){e.enterpriseName=t},expression:"enterpriseName"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.changeEnterprise}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"选择设备负责人",visible:e.employeeDialogVisible,width:"25%"},on:{"update:visible":function(t){e.employeeDialogVisible=t}}},[r("el-divider"),r("el-form",{ref:"queryForm",attrs:{model:e.queryForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"选择负责人",prop:"employeeId"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryEmployee,placeholder:"请输入负责人名称",clearable:""},on:{blur:function(t){return e.mustSel(e.queryForm.employeeId,"employeeName")},select:e.employeeHandleSelect},model:{value:e.employeeName,callback:function(t){e.employeeName=t},expression:"employeeName"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.employeeDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.changeEmployee}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"报警信息",visible:e.detailDialog,width:"80%"},on:{"update:visible":function(t){e.detailDialog=t}}},[r("el-divider"),e._l(e.detailData,(function(t,a){return r("div",[r("el-row",[r("el-col",{attrs:{span:2}},[e._v(" "+e._s(a+1)+": ")]),r("el-col",{attrs:{span:4}},[e._v(" "+e._s(e.alarmType(t.alarmType))+" ")]),r("el-col",{attrs:{span:4}},[e._v(" "+e._s(t.alarmMemo||"")+" ")]),r("el-col",{attrs:{span:4}},[e._v(" "+e._s(t.handleUsername||"")+" ")]),r("el-col",{attrs:{span:4}},[e._v(" "+e._s(e.handleState(t.handleState))+" ")]),r("el-col",{attrs:{span:4}},[e._v(" "+e._s(e.dateFormat(t.updateDatetime))+" ")])],1)],1)}))],2)],1)},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])}],i=(r("ecb4"),r("2eeb"),r("053b"),r("e35a"),r("9cf3"),{props:["tableData","queryForm"],data:function(){return{queryInfo:this.queryForm,multipleSelection:[],chooseGoodsStr:"",options:[],dialogVisible:!1,formLabelWidth:"100px",restaurants:[],groupSelect:{},productName:"",selectId:"",enterpriseId:"",enterpriseName:"",employeeId:"",employeeName:"",employeeDialogVisible:!1,detailDialog:!1,detailData:[]}},computed:{alarmType:function(){var e=this;return function(t){return e.$alarmType(t)}},handleState:function(){var e=this;return function(t){return e.$handleState(t)}},dateFormat:function(){var e=this;return function(t){return e.$moment(t).format("YYYY-MM-DD HH:MM:SS")}}},methods:{putaway:function(e,t){var r=this;1==e?r.httpPost("/device/stop/"+t,{},null,!0).then((function(e){r.$refs.deviceMac.click(),r.$message.success("停用成功"),r.$emit("getSearch")})):r.httpPost("device/start/"+t,{},null,!0).then((function(e){r.$refs.deviceMac.click(),r.$message.success("启用成功"),r.$emit("getSearch")}))},cancelInput:function(e){this.$refs.deviceMac.click()},searchDetail:function(e){var t=this,r={deviceId:e},a="/device/alarm/query";this.queryForm.isAll&&(a="/device/alarm/query_all"),this.httpGet(a,r).then((function(e){t.detailData=e.rows}))},addDevice:function(){this.$router.push({path:"/editdevice",name:"EditDevice",params:{type:"add"}})},editDevice:function(e){this.$router.push({path:"/editdevice",name:"EditDevice",params:{type:"edit",info:e}})},editEmployee:function(e){this.selectId=e.id,this.employeeId="",this.employeeName="",this.employeeDialogVisible=!0},editEnterprise:function(e){this.selectId=e.id,this.enterpriseId="",this.enterpriseName="",this.dialogVisible=!0},alarmDevice:function(e){this.selectId=e.id,this.searchDetail(e.id),this.detailDialog=!0},handleSelectionChange:function(e){},handleSelect:function(e){this.groupSelect=e,this.productName=e.name,this.queryForm.productId=e.id},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},queryEmployee:function(e,t){this.associateQuery(e,t,"/basic/employee/query","httpPost")},queryEnterprise:function(e,t){this.associateQuery(e,t,"/basic/enterprise/query","httpPost")},querySearch:function(e,t){this.associateQuery(e,t,"/product/query/","httpGet")},associateQuery:function(e,t,r,a){var o=this,i={size:10,page:1,total:"",state:1,name:e};this[a](r,i,null,!0).then((function(e){e.rows.map((function(e){return e.value=e.name})),o.restaurants=e.rows,t(o.restaurants)}))},enterpriseHandleSelect:function(e){this.enterpriseName=e.name,this.enterpriseId=e.id},employeeHandleSelect:function(e){this.employeeName=e.code+" - "+e.name,this.employeeId=e.id},mustSel:function(e,t){this.$mustSel(this,e,t)},changeEnterprise:function(){var e=this;if(!this.enterpriseId)return this.$message.error("请先选择归属公司");var t={deviceId:this.selectId,enterpriseId:this.enterpriseId};this.httpPost("/device/change",t).then((function(t){e.$message.success("设置成功"),e.dialogVisible=!1,e.search()}))},changeEmployee:function(){var e=this;if(!this.employeeId)return this.$message.error("请先选择负责人");var t={deviceId:this.selectId,employeeId:this.employeeId};this.httpPost("/device/assign",t).then((function(t){e.$message.success("设置成功"),e.employeeDialogVisible=!1,e.search()}))},changePage:function(){this.$emit("getPage",this.queryInfo.page)},search:function(){this.productName||(this.queryForm.productId=""),this.$emit("getSearch",this.queryInfo)}},watch:{},mounted:function(){}}),s=i,l=(r("f9bd"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"5517fa07",null);t["a"]=n.exports},"51d6":function(e,t,r){"use strict";var a=r("22aa"),o=r.n(a);o.a},"554e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("产品管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"使用中",name:"selling"}},[r("ProductTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,edit:e.edit,editBlender:e.editBlender,editStorage:e.editStorage,editGood:e.editGood,del:e.del}})],1),r("el-tab-pane",{attrs:{label:"已停用",name:"disuse"}},[r("ProductTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,edit:e.edit,enable:e.enable}})],1)],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"queryInfo",staticClass:"form_border",attrs:{model:e.queryInfo,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"产品编号",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入产品编号",clearable:""},model:{value:e.queryInfo.code,callback:function(t){e.$set(e.queryInfo,"code",t)},expression:"queryInfo.code"}})],1),r("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入产品名称",clearable:""},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增产品")]),e._m(0)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"code",label:"产品编号"}}),r("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),r("el-table-column",{attrs:{prop:"price",label:"产品造价(元)",width:"160"}}),r("el-table-column",{attrs:{prop:"memo",label:"备注"}}),r("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.editBlender(t.row)}}},[e._v("搅拌机")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.editStorage(t.row)}}},[e._v("料仓")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.editGood(t.row)}}},[e._v("商品")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.del(t.row.id)}}},[e._v("停用")]):e._e(),0==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.enable(t.row.id)}}},[e._v("启用")]):e._e()]}}])})],1),e.queryInfo.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryInfo,e.changePage)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryInfo,e.changePage)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryInfo.total,"current-page":e.queryInfo.page,"page-size":e.queryInfo.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.queryInfo,"size",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"size",t)},"current-change":e.changePage}})],1):e._e()],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])}],l={props:["tableData","queryForm"],data:function(){return{queryInfo:this.queryForm}},methods:{changePage:function(){this.$emit("getPage",this.queryInfo.page)},search:function(){this.$emit("getSearch",this.queryInfo)},add:function(){this.$emit("add")},edit:function(e){this.$emit("edit",e)},editBlender:function(e){this.$emit("editBlender",e)},editStorage:function(e){this.$emit("editStorage",e)},editGood:function(e){this.$emit("editGood",e)},del:function(e){this.$emit("del",e)},enable:function(e){this.$emit("enable",e)}},watch:{}},n=l,u=r("9ca4"),c=Object(u["a"])(n,i,s,!1,null,"621823a4",null),d=c.exports,m={components:{ProductTable:d},data:function(){return{ruleForm:{productId:"",name:"",code:"",price:"",memo:"",uvTime:[{start:"",end:""}]},activeName:"selling",queryForm:{name:"",code:"",state:1,size:10,page:1,total:""},tableData:[],editInfo:{},dialogVisible:!1,formLabelWidth:"120px"}},methods:{getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(e){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editproduct",name:"EditProduct",params:{type:"add",info:this.ruleForm}})},edit:function(e){this.$router.push({path:"/editproduct",name:"EditProduct",params:{type:"edit",info:e}})},editBlender:function(e){this.$router.push({path:"/blender",name:"Blender",params:{type:"edit",productId:e.id,info:e}})},editStorage:function(e){this.$router.push({path:"/storage",name:"Storage",params:{type:"edit",productId:e.id,info:e}})},editGood:function(e){this.$router.push({path:"/productGood",name:"ProductGood",params:{type:"edit",productId:e.id}})},del:function(e){var t=this;this.$confirm("此操作将停用数据, 是否继续?","提示",{type:"warning"}).then((function(){t.httpPost("/product/disable/"+e,"").then((function(e){t.$message({type:"success",message:"停用成功!"}),t.handleClick()}))})).catch((function(){}))},enable:function(e){var t=this;this.$confirm("此操作将启用数据1, 是否继续?","提示",{type:"warning"}).then((function(){t.httpPost("/product/enable/"+e,"").then((function(e){t.$message({type:"success",message:"启用成功!"}),t.handleClick()}))})).catch((function(){}))},handleClick:function(e,t){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.state="selling"===this.activeName?1:0,this.httpGet("/product/query/",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},p=m,f=(r("bbe2"),Object(u["a"])(p,a,o,!1,null,"57a74b18",null));t["default"]=f.exports},5649:function(e,t,r){},"56e4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("料仓设置")])],1)],1),r("el-card",[r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增料仓")]),r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-key":"id"}},[r("el-table-column",{attrs:{prop:"code",label:"料仓编号"}}),r("el-table-column",{attrs:{prop:"name",label:"料仓名称"}}),r("el-table-column",{attrs:{prop:"blenderName",label:"搅拌器名称"}}),r("el-table-column",{attrs:{prop:"speed",label:"下料速度"}}),r("el-table-column",{attrs:{prop:"alarm",label:"警报值"}}),r("el-table-column",{attrs:{prop:"stop",label:"停售值"}}),r("el-table-column",{attrs:{prop:"full",label:"满量值"}}),r("el-table-column",{attrs:{prop:"specialMaterial",label:"特殊材料"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.specialMaterial?r("el-tag",{attrs:{type:"danger"}},[e._v("否")]):e._e(),1===t.row.specialMaterial?r("el-tag",[e._v("糖")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"memo",label:"备注"}}),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")])]}}])})],1),r("div",{staticClass:"fn_btn"},["add"===e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("上一步")]):e._e(),"add"===e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:e.toProductGood}},[e._v("下一步")]):e._e(),"edit"===e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:e.toProduct}},[e._v("返回")]):e._e()],1)],1),r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-divider"),r("el-form",{ref:"ruleForm",attrs:{inline:"",rules:e.rules,model:e.ruleForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"料仓编号",prop:"code"}},[r("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:"料仓名称",prop:"name"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"搅拌机",prop:"blenderId"}},[r("el-select",{attrs:{size:"small",placeholder:"选择搅拌器"},model:{value:e.ruleForm.blenderId,callback:function(t){e.$set(e.ruleForm,"blenderId",t)},expression:"ruleForm.blenderId"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"下料速度(g/s)",prop:"speed"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.speed,callback:function(t){e.$set(e.ruleForm,"speed",t)},expression:"ruleForm.speed"}})],1),r("el-form-item",{attrs:{label:"满量值(g)",prop:"full"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.full,callback:function(t){e.$set(e.ruleForm,"full",t)},expression:"ruleForm.full"}})],1),r("el-form-item",{attrs:{label:"警报值(g/s)",prop:"alarm"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.alarm,callback:function(t){e.$set(e.ruleForm,"alarm",t)},expression:"ruleForm.alarm"}})],1),r("el-form-item",{attrs:{label:"停售值(g/s)",prop:"stop"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.stop,callback:function(t){e.$set(e.ruleForm,"stop",t)},expression:"ruleForm.stop"}})],1),r("el-form-item",{attrs:{label:"特殊材料",prop:"specialMaterial"}},[r("el-radio-group",{model:{value:e.ruleForm.specialMaterial,callback:function(t){e.$set(e.ruleForm,"specialMaterial",t)},expression:"ruleForm.specialMaterial"}},[r("el-radio",{attrs:{label:1}},[e._v("糖")]),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"备注",prop:"memo"}},[r("el-input",{staticStyle:{width:"120%"},attrs:{rows:2,type:"textarea",placeholder:"请输入内容",maxlength:"255"},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editBlender("ruleForm")}}},[e._v("确 定")])],1)],1)],1)],1)},o=[],i=(r("b4fb"),{data:function(){return{ruleForm:{productId:"",id:"",code:"",name:"",memo:"",blenderId:"",speed:"",alarm:"",full:"",stop:"",specialMaterial:0},options:[],tableData:[],dialogVisible:!1,formLabelWidth:"100px",title:"",rules:{name:[{required:!0,message:"请输入料仓名称",trigger:"blur"}],code:[{required:!0,message:"请输入料仓编码",trigger:"blur"}],blenderId:[{required:!0,message:"请选择搅拌器",trigger:"chanage"}],speed:[{required:!0,message:"请输入下料速度",trigger:"blur"}],alarm:[{required:!0,message:"请输入警报值",trigger:"blur"}],full:[{required:!0,message:"请输入满量值",trigger:"blur"}],stop:[{required:!0,message:"请输入停售值",trigger:"blur"}],specialMaterial:[{required:!0,message:"请选择特殊材料值",trigger:"change"}]}}},methods:{cancelForm:function(){this.$router.push({path:"/blender",name:"Blender",params:{type:"add",productId:this.ruleForm.productId,info:this.$route.params.info}})},toProduct:function(){this.$router.push({path:"/product"})},toProductGood:function(){this.$router.push({path:"/productGood",name:"ProductGood",params:{type:"add",productId:this.ruleForm.productId,info:this.$route.params.info}})},loadData:function(){var e=this;this.httpGet("/product/storage/query/"+this.ruleForm.productId,"").then((function(t){e.tableData=t}))},blenderQuery:function(){var e=this;this.httpGet("/product/blender/query/"+this.ruleForm.productId,"").then((function(t){e.options=t}))},add:function(){var e=this;this.title="新增料仓",this.dialogVisible=!0,this.$nextTick((function(){e.$refs.ruleForm.resetFields(),e.ruleForm={productId:e.$route.params.productId,code:e.$route.params.info.code.concat(e.$formatCode(e.tableData.length)),id:"",name:"",memo:"",blenderId:"",speed:"",alarm:"",full:"",specialMaterial:0}}))},edit:function(e){this.title="修改料仓",this.ruleForm=Object.assign({},e),this.dialogVisible=!0},editBlender:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"新增料仓"==t.title?t.httpPost("/product/storage/add",t.ruleForm).then((function(e){t.$message({type:"success",message:"增加成功!"}),t.dialogVisible=!1,t.loadData()})):t.httpPost("/product/storage/mod/"+t.ruleForm.id,t.ruleForm).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.dialogVisible=!1,t.loadData()}))}))},resetForm:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1}},mounted:function(){if(this.ruleForm.productId=this.$route.params.productId,"add"===this.$route.params.type)this.type="add";else{if("edit"!==this.$route.params.type)return void this.$router.push({path:"/product"});this.type="edit"}this.blenderQuery(),this.loadData()}}),s=i,l=(r("f6d3"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"73b09b5a",null);t["default"]=n.exports},"6f1b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABiklEQVRYR+2XsStFURzHP+8PUBayvzIw+gf8CxaelAwWYbFYFC+LFIPBIllMBouBQWGwKBYxGCxKKCXKYtG3ztNx3j33nnsuj+GeevXqvd/v8zm/fuee363wx6tSgN8BbAJ3wGRsniIC/cCRAUfniQ4ESoGyAmUFygqUFfjVCrQBfcA58Oa5aEIF2oGqydWUyncXjAFbwBUwCFwnSIQI9AA7QK/5NOXxCQwAuwbqk8gSsOFK1QU8uhtJuw3ngMUUiTQBG/4B1KwNfXPIuo5ngSWPhE/Ahr8b+J5vYMkSUNwMsJIgkSRgw1+BIeAgbVoKEVD8NLDmSHQ6E5ENfzY7P8wa1UIFlGcCWLckpiwBdXmj2x8M/CQLrt/zCOj/48CGJSGwlk6KvmtAHQZOQ+AxAoppPCNcxq2Bn4XCYwUUNwJsW6AbA7/IAy8ioFh1+CrwBIwCl3nhRQUUr86/B15i4D8hEMv9irNPgbq3u3DGsAQ6osduBfSapadbK9YCUHcF5lsosAzs/4se+ARuhFUhFb683AAAAABJRU5ErkJggg=="},"6f43":function(e,t,r){"use strict";var a=r("8340"),o=r.n(a);o.a},"7c53":function(e,t,r){},"7e79":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABGUlEQVRYR+2XIQ7CMBSGPwzH4QIYLAlI0HAH0IAGjcCABgkJEgwX4ETkJSt5NN36uiXDtGZb0r7v69+mzTr8uXUUfwYcW/KZAydhaYEtsGhJYAcsfQH5HrQk8HQcnUBL7F9MUwGX2HdGqbNoIrAC1gVQnptUeGgPWGtouBtTS6JOAiF4bYlUAQ2/AJOCrN+TkkgR8OF74FEISJ2zEjJLWAV8+LQ4M7SAuCRLWARCcHdo+QLJEjGBMniVQJJElUAVPCZgligTGAFXtcNlzf0mp2BoCXQ/vSfGwM0vUibQA+7ACwjBLQk4lkj0gSHwtgpYTkRLAtE6sU1YVSAL5ARyAjmBnEBOQO4J+aHtAoforVPSocllVJf5M+4D9kpBIVJZIOcAAAAASUVORK5CYII="},8340:function(e,t,r){},"84dc":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/role"}}},[e._v("安卓升级")]),r("el-breadcrumb-item",[e._v("新增Apk")])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{ref:"apkName",attrs:{label:"apk文件",prop:"filename"}},[r("el-upload",{staticClass:"upload-demo",attrs:{accept:".apk",limit:1,action:e.uploadAction(),"on-success":e.uploadSuccess,beforeUpload:e.beforeUpload,"on-remove":function(){return e.ruleForm.filename=""}}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[r("i",{staticClass:"el-icon-upload2"}),e._v(" 上传")])])],1),r("el-form-item",{attrs:{label:"产品型号",prop:"productName"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入选择型号",clearable:""},on:{blur:e.mustSel,select:e.handleSelect},model:{value:e.ruleForm.productName,callback:function(t){e.$set(e.ruleForm,"productName",t)},expression:"ruleForm.productName"}})],1),r("el-form-item",{attrs:{label:"版本名称",prop:"versionName"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入版本名称"},model:{value:e.ruleForm.versionName,callback:function(t){e.$set(e.ruleForm,"versionName",t)},expression:"ruleForm.versionName"}})],1),r("el-form-item",{attrs:{label:"版本编号",prop:"versionCode"}},[r("el-input",{attrs:{type:"number",size:"small",placeholder:"请输入版本编号"},model:{value:e.ruleForm.versionCode,callback:function(t){e.$set(e.ruleForm,"versionCode",e._n(t))},expression:"ruleForm.versionCode"}})],1),r("el-form-item",{attrs:{label:"版本描述",prop:"memo"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入版本描述"},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},o=[],i=(r("2eeb"),r("053b"),{data:function(){return{ruleForm:{filename:"",memo:"",productId:"",versionCode:"",versionName:"",productName:""},rules:{productName:[{required:!0,message:"请输入选择型号",trigger:"change"}],versionName:[{required:!0,message:"请输入版本名称",trigger:"change"}],versionCode:[{required:!0,message:"请输入版本编号",trigger:"change"}],filename:[{required:!0,message:"请上传Apk文件",trigger:"change"}]},restaurants:[],isSelect:!1,productId:"",productName:""}},methods:{uploadAction:function(){return this.$picUpload},uploadSuccess:function(e,t,r){this.ruleForm.filename=e.data.fileName;var a=this.$refs.apkName.$el.children[1].children[1];a&&(a.style.display="none")},beforeUpload:function(e){var t=e.size/1024/1024<500;return t||this.$message({message:"上传文件大小不能超过 500MB!",type:"warning"}),t},handleSelect:function(e){this.productId=e.id,this.isSelect=!0},querySearch:function(e,t){var r=this,a={total:1,state:1,name:e};this.httpGet("/product/query/",a,null,!0).then((function(e){e.rows.map((function(e){e.value=e.name})),r.restaurants=e.rows,t(r.restaurants)}))},saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(!t.isSelect&&""!==t.ruleForm.productId)return t.ruleForm.productId="",t.$message.warning("请输入后选择正确产品");var r=Object.assign({},t.ruleForm);r.productId=t.productId,t.httpPost("/apk/add",r).then((function(e){t.$message.success("新增成功"),t.$router.back()}))}))},cancelForm:function(){this.$router.back()},mustSel:function(){this.$mustSel(this,this.ruleForm.productId,"productName")}},mounted:function(){}}),s=i,l=(r("d947"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"0727c972",null);t["default"]=n.exports},8682:function(e,t,r){"use strict";var a=r("ef4e"),o=r.n(a);o.a},"90d9":function(e,t,r){"use strict";var a=r("e5a5"),o=r.n(a);o.a},"9cf3":function(e,t,r){"use strict";var a=r("b2a2"),o=r("857c"),i=r("2732"),s=r("9d5c"),l=r("59da");a("search",1,(function(e,t,r){return[function(t){var r=i(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var i=o(e),n=String(this),u=i.lastIndex;s(u,0)||(i.lastIndex=0);var c=l(i,n);return s(i.lastIndex,u)||(i.lastIndex=u),null===c?-1:c.index}]}))},"9d5c":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},a4ac:function(e,t,r){"use strict";var a=r("7c53"),o=r.n(a);o.a},a4f2:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("设备管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.getSearch},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"使用中",name:"inOperation"}},["inOperation"===e.activeName?r("DeviceTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage}}):e._e()],1),r("el-tab-pane",{attrs:{label:"停用中",name:"outOperation"}},["outOperation"===e.activeName?r("DeviceTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage}}):e._e()],1)],1)],1)],1)},o=[],i=r("4dfe"),s={components:{DeviceTable:i["a"]},data:function(){return{activeName:"inOperation",queryForm:{isAll:!0,deviceMac:"",productId:"",enable:1,size:10,page:1,total:""},tableData:[],multipleSelection:[],chooseGoodsStr:"",options:[],formLabelWidth:"100px",restaurants:[],groupSelect:{},productId:""}},methods:{getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.enable="inOperation"===this.activeName?1:0,this.httpGet("/device/query_all/",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},l=s,n=(r("bc92"),r("9ca4")),u=Object(n["a"])(l,a,o,!1,null,"86e8ea44",null);t["default"]=u.exports},af49:function(e,t,r){},b0d4:function(e,t,r){"use strict";var a=r("b85a"),o=r.n(a);o.a},b1d2:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABKklEQVRYR+2VMW7DMAxFn9dk7pYADdAuPUVziOQSOU8vkRyiPUWXFmiBZOvczAEBCRBkWaToIYs82RLI//hFmQPznmUI//emGbyBwA54C/EH4OTJ5QUQ8WMmuPdAeABK4pGlGaIVoCbugmgByMWl2ngM6buAmJ2wApTE/4D3UPYWeMj6wgRhASiJS8e/ZgAf4WakzalCaABT4lJ4CUDWazGjm1oD0BJNATRBTAFo4jUHYpWWHJQATIGVI0htVnPlAGpAkr12BGaIFOAR+EkitQ62ApR6YgP8ykYK8AR8BQBN3NIDecen7j4D3zmAfL8A10inTLcWB2IqcXkBfMYF7T9QY/AANP0HtPHeAboD3YHuQHegO3B3B1bAOUysNXDRpldpf8449uiNYm42+GUhd7kedAAAAABJRU5ErkJggg=="},b220:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/company"}}},[e._v("公司管理")]),r("el-breadcrumb-item",[e._v(e._s("edit"===e.$route.params.type?"修改公司":"新增公司"))])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{inline:"",model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"公司名称",prop:"name"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"内部企业编号",prop:"code"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditCode"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.creditCode,callback:function(t){e.$set(e.ruleForm,"creditCode",t)},expression:"ruleForm.creditCode"}})],1),r("el-form-item",{attrs:{label:"公司电话",prop:"phone"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:"公司地址",prop:"address"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),r("el-form-item",{attrs:{label:"法人/代理人",prop:"legalPerson"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.legalPerson,callback:function(t){e.$set(e.ruleForm,"legalPerson",t)},expression:"ruleForm.legalPerson"}})],1),"add"===e.$route.params.type?r("hr",{staticStyle:{margin:"20px 0px 20px 0px"},attrs:{size:"1",color:"#5151A2"}}):e._e(),"add"===e.$route.params.type?r("el-form-item",{attrs:{label:"管理员账号",prop:"account"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1):e._e(),"add"===e.$route.params.type?r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",size:"small"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1):e._e(),r("hr",{staticStyle:{margin:"20px 0px 20px 0px"},attrs:{size:"1",color:"#5151A2"}}),r("el-form-item",{attrs:{label:"资源列表",prop:"resourceList"}},[r("el-tree",{ref:"tree",staticClass:"my_tree",attrs:{data:e.rightList,"show-checkbox":"","node-key":"id","default-checked-keys":e.checkList,props:e.defaultProps,"default-expand-all":"","check-on-click-node":""},on:{check:e.checkChange}})],1),r("el-form-item",{attrs:{label:" "}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("返回")])],1)],1)],1)],1)},o=[],i={data:function(){return{ruleForm:{id:"",name:"",code:"",creditCode:"",phone:"",address:"",fax:"",legalPerson:"",legalCertType:"",legalCertCode:"",legalGender:"",legalNation:"",resourceList:[],account:"",password:""},rules:{name:[{required:!0,message:"请输入公司名称",trigger:"blur"}],code:[{required:!0,message:"请输入内部企业编号",trigger:"blur"}],creditCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"}],account:[{required:!0,message:"请输入管理员账号",trigger:"blur"}],password:[{required:!0,message:"请输入管理员密码",trigger:"blur"}]},uploadImgMain:!1,certTypeOptions:[{value:"1",label:"身份证"},{value:"2",label:"护照"},{value:"3",label:"台湾居民来往大陆通行证"},{value:"4",label:"港澳居民来往内地通行证"},{value:"5",label:"外国人永久居留证"}],genderOptions:[{value:"0",label:"未知的性别"},{value:"1",label:"男性"},{value:"2",label:"女性"},{value:"5",label:"女性改（变）为男性"},{value:"6",label:"男性改（变）为女性"},{value:"9",label:"未说明的性别"}],sourceForm:{},defaultProps:{children:"childNode",label:"name"},rightList:[],checkList:[],checkListAll:""}},methods:{saveForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.ruleForm.resourceList=t.checkListAll;var r=Object.assign({},t.ruleForm);"add"===t.type?t.httpPost("/basic/enterprise/add",r).then((function(e){t.$message.success("新增成功"),t.$router.back()})):t.httpPost("/basic/enterprise/mod/"+r.id,r).then((function(e){t.$message.success("修改成功"),t.$router.back()}))}))},chooseResource:function(){this.$router.push({path:"/editResource",name:"EditResource",params:{type:"add",info:this.ruleForm}})},cancelForm:function(){this.$router.push({path:"/company",name:"Company",params:{}})},checkChange:function(e,t){this.checkList=t.checkedKeys,this.checkListAll=this.$roleJoin(t.checkedNodes)}},mounted:function(){var e=this;if(!this.$route.params.type)return this.$router.back();"edit"===this.$route.params.type?(this.type="edit",this.ruleForm=this.$route.params.info):this.type="add";var t={state:1,size:999,page:1,total:""};this.httpPost("/basic/resource/query",t).then((function(t){for(var r=[],a=0;a<t.rows.length;a++)if(0==t.rows[a].parentId)t.rows[a].childNode=[],r.push(t.rows[a]);else for(var o=0;o<r.length;o++)if(r[o].id===t.rows[a].parentId){r[o].childNode.push(t.rows[a]);break}var i=Object.assign([],r);if(e.menuArr=Object.assign([],r),e.rightList=i,"edit"===e.$route.params.type)e.httpPost("/basic/enterprise/query/resource/"+e.ruleForm.id,"").then((function(t){e.checkList=t,e.sourceForm.resourceList=t}));else for(a=0;a<t.rows.length;a++)1==t.rows[a].defaultAssign&&e.checkList.push(t.rows[a].id)}))}},s=i,l=(r("a4ac"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"48d29857",null);t["default"]=n.exports},b4fb:function(e,t,r){"use strict";var a=r("1c8b"),o=r("efe2"),i=r("74e7"),s=r("a719"),l=r("3553"),n=r("d88d"),u=r("1bbd"),c=r("1ca1"),d=r("1ea7"),m=r("90fb"),p=r("f594"),f=m("isConcatSpreadable"),h=9007199254740991,b="Maximum allowed index exceeded",g=p>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),y=d("concat"),v=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:i(e)},F=!g||!y;a({target:"Array",proto:!0,forced:F},{concat:function(e){var t,r,a,o,i,s=l(this),d=c(s,0),m=0;for(t=-1,a=arguments.length;t<a;t++)if(i=-1===t?s:arguments[t],v(i)){if(o=n(i.length),m+o>h)throw TypeError(b);for(r=0;r<o;r++,m++)r in i&&u(d,m,i[r])}else{if(m>=h)throw TypeError(b);u(d,m++,i)}return d.length=m,d}})},b712:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("搅拌机设置")])],1)],1),r("el-card",[r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增搅拌器")]),r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-key":"id"}},[r("el-table-column",{attrs:{prop:"code",label:"搅拌器编号"}}),r("el-table-column",{attrs:{prop:"name",label:"搅拌器名称"}}),r("el-table-column",{attrs:{prop:"memo",label:"备注"}}),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")])]}}])})],1)],1),r("div",{staticClass:"fn_btn"},["add"===e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:e.cancelForm}},[e._v("上一步")]):e._e(),"add"===e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:e.toStorage}},[e._v("下一步")]):e._e(),"edit"===e.$route.params.type?r("el-button",{attrs:{type:"primary"},on:{click:e.toProduct}},[e._v("返回")]):e._e()],1),r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-divider"),r("el-form",{ref:"ruleForm",attrs:{rules:e.blenderRules,model:e.ruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"搅拌器编号",prop:"code"}},[r("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:"搅拌器名称",prop:"name"}},[r("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"memo"}},[r("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入内容",maxlength:"255"},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editBlender("ruleForm")}}},[e._v("确 定")])],1)],1)],1)],1)},o=[],i=(r("b4fb"),{data:function(){return{ruleForm:{productId:"",id:"",code:"",name:"",memo:""},tableData:[],dialogVisible:!1,formLabelWidth:"100px",title:"",blenderRules:{name:[{required:!0,message:"请输入搅拌器名称",trigger:"blur"}],code:[{required:!0,message:"请输入搅拌器编码",trigger:"blur"}]}}},methods:{cancelForm:function(){this.$router.push({path:"/editproduct",name:"EditProduct",params:{type:"pre",info:this.$route.params.info}})},toProduct:function(){this.$router.push({path:"/product"})},toStorage:function(){this.$router.push({path:"/storage",name:"Storage",params:{type:"add",productId:this.ruleForm.productId,info:this.$route.params.info}})},loadData:function(){var e=this;this.httpGet("/product/blender/query/"+this.ruleForm.productId,"").then((function(t){e.tableData=t}))},add:function(){var e=this;this.title="新增搅拌器",this.dialogVisible=!0,this.$nextTick((function(){e.$refs.ruleForm.resetFields(),e.ruleForm={id:"",productId:e.$route.params.productId,code:e.$route.params.info.code.concat(e.$formatCode(e.tableData.length)),name:"",memo:""}}))},resetForm:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1},edit:function(e){this.title="修改搅拌器",this.ruleForm=Object.assign({},e),this.dialogVisible=!0},editBlender:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"新增搅拌器"==t.title?t.httpPost("/product/blender/add",t.ruleForm).then((function(e){t.$message({type:"success",message:"增加成功!"}),t.dialogVisible=!1,t.loadData()})):t.httpPost("/product/blender/mod/"+t.ruleForm.id,t.ruleForm).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.dialogVisible=!1,t.loadData()}))}))}},mounted:function(){if(this.ruleForm={productId:this.$route.params.productId,id:"",code:"",name:"",memo:""},"add"===this.$route.params.type)this.type="add";else{if("edit"!==this.$route.params.type)return void this.$router.push({path:"/product"});this.type="edit"}this.loadData()}}),s=i,l=(r("90d9"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"8c6e240e",null);t["default"]=n.exports},b85a:function(e,t,r){},b91b:function(e,t,r){},bb1a:function(e,t,r){"use strict";var a=r("30de"),o=r.n(a);o.a},bbe2:function(e,t,r){"use strict";var a=r("d7d2"),o=r.n(a);o.a},bc92:function(e,t,r){"use strict";var a=r("b91b"),o=r.n(a);o.a},bec3:function(e,t,r){"use strict";var a=r("2541"),o=r.n(a);o.a},bf81:function(e,t,r){},c5bb:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("安卓升级")])],1)],1),r("el-card",[r("el-form",{ref:"queryForm",staticClass:"form_border",attrs:{model:e.queryForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"产品型号",prop:"productId"}},[r("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入选择型号",clearable:""},on:{blur:e.mustSel,select:e.handleSelect},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增Apk")]),r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"filename",label:"apk文件"}}),r("el-table-column",{attrs:{prop:"memo",label:"版本描述"}}),r("el-table-column",{attrs:{prop:"productName",label:"所属产品名称"}}),r("el-table-column",{attrs:{label:"版本状态",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.state?r("el-tag",{attrs:{type:"info"}},[e._v("旧版本")]):r("el-tag",{attrs:{type:"primary"}},[e._v("新版本")])]}}])}),r("el-table-column",{attrs:{prop:"versionCode",label:"版本编号",width:"140"}}),r("el-table-column",{attrs:{prop:"versionName",label:"版本名称",width:"140"}}),r("el-table-column",{attrs:{prop:"createDatetime",label:"创建时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(t.row.createDatetime).format("YYYY-MM-DD"))+" ")]}}])})],1),e.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryForm,e.loadData)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryForm,e.loadData)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryForm.total,"current-page":e.queryForm.page,"page-size":e.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryForm,"page",t)},"update:current-page":function(t){return e.$set(e.queryForm,"page",t)},"update:pageSize":function(t){return e.$set(e.queryForm,"size",t)},"update:page-size":function(t){return e.$set(e.queryForm,"size",t)},"current-change":e.loadData}})],1):e._e()],1)],1)],1)},o=[],i=(r("2eeb"),r("053b"),{data:function(){return{queryForm:{page:1,size:10,total:"",productId:"",state:1,memo:""},tableData:[],restaurants:[],isSelect:!1,groupSelect:{},productId:"",productName:""}},methods:{mustSel:function(){this.$mustSel(this,this.queryForm.productId,"productName")},add:function(){this.$router.push("/addapk")},handleSelect:function(e){this.groupSelect=e,this.productId=e.id,this.isSelect=!0},querySearch:function(e,t){var r=this,a={total:1,state:1,name:e};this.httpGet("/product/query/",a,null,!0).then((function(e){e.rows.map((function(e){e.value=e.name})),r.restaurants=e.rows,t(r.restaurants)}))},onSubmit:function(){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this;if(!this.isSelect&&""!==this.queryForm.productId)return this.queryForm.productId="",this.$message.warning("请输入后选择正确产品");var t=Object.assign({},this.queryForm);t.productId=this.queryForm.productId?this.productId:"",this.httpPost("/apk/query",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}}),s=i,l=(r("8682"),r("9ca4")),n=Object(l["a"])(s,a,o,!1,null,"695f6d22",null);t["default"]=n.exports},cae6:function(e,t,r){"use strict";var a=r("3dfd"),o=r.n(a);o.a},cf1c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("设备管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.getSearch},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"使用中",name:"inOperation"}},["inOperation"===e.activeName?r("DeviceTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage}}):e._e()],1),r("el-tab-pane",{attrs:{label:"停用中",name:"outOperation"}},["outOperation"===e.activeName?r("DeviceTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage}}):e._e()],1)],1)],1)],1)},o=[],i=r("4dfe"),s={components:{DeviceTable:i["a"]},data:function(){return{activeName:"inOperation",queryForm:{isAll:!1,deviceMac:"",productId:"",enable:1,size:10,page:1,total:""},tableData:[],multipleSelection:[],chooseGoodsStr:"",options:[],formLabelWidth:"100px",restaurants:[],groupSelect:{},productId:""}},methods:{getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.enable="inOperation"===this.activeName?1:0,this.httpGet("/device/query/",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},l=s,n=(r("bec3"),r("9ca4")),u=Object(n["a"])(l,a,o,!1,null,"e1d77f4c",null);t["default"]=u.exports},d496:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("公司管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"营业中",name:"inOperation"}},[r("EnterpriseTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,edit:e.edit,editResource:e.editResource,disable:e.disable}})],1),r("el-tab-pane",{attrs:{label:"歇业中",name:"outOperation"}},[r("EnterpriseTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,add:e.add,enable:e.enable}})],1)],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"queryInfo",staticClass:"form_border",attrs:{model:e.queryInfo,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"公司名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增公司")]),e._m(0)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"name",label:"公司名称"}}),r("el-table-column",{attrs:{prop:"code",label:"内部企业编号"}}),r("el-table-column",{attrs:{prop:"creditCode",label:"统一社会信用代码"}}),r("el-table-column",{attrs:{prop:"phone",label:"公司电话"}}),r("el-table-column",{attrs:{prop:"address",label:"地址"}}),r("el-table-column",{attrs:{prop:"legalPerson",label:"法人/代理人"}}),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.disable(t.row.id)}}},[e._v("停用")]):e._e(),0==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.enable(t.row.id)}}},[e._v("启用")]):e._e()]}}])})],1),e.queryInfo.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryInfo,e.changePage)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryInfo,e.changePage)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryInfo.total,"current-page":e.queryInfo.page,"page-size":e.queryInfo.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.queryInfo,"size",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"size",t)},"current-change":e.changePage}})],1):e._e()],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])}],l={props:["tableData","queryForm"],data:function(){return{queryInfo:this.queryForm}},methods:{changePage:function(){this.$emit("getPage",this.queryInfo.page)},search:function(){this.$emit("getSearch",this.queryInfo)},add:function(){this.$emit("add")},edit:function(e){this.$emit("edit",e)},disable:function(e){this.$emit("disable",e)},enable:function(e){this.$emit("enable",e)},editResource:function(e){this.$emit("editResource",e)}},watch:{},mounted:function(){}},n=l,u=r("9ca4"),c=Object(u["a"])(n,i,s,!1,null,"eaa3c7fe",null),d=c.exports,m={components:{EnterpriseTable:d},data:function(){return{activeName:"inOperation",queryForm:{name:"",state:1,size:10,page:1,total:""},tableData:[],formLabelWidth:"120px"}},methods:{getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(e){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editEnterprise",name:"EditEnterprise",params:{type:"add"}})},edit:function(e){this.$router.push({path:"/editEnterprise",name:"EditEnterprise",params:{type:"edit",info:e}})},editResource:function(e){this.$router.push({path:"/editResource",name:"EditResource",params:{type:"edit",info:e}})},disable:function(e){var t=this;this.$confirm("确定要使该公司歇业?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/enterprise/disable/"+e,"").then((function(e){t.$message({type:"success",message:"歇业成功!"}),t.handleClick()}))})).catch((function(){}))},enable:function(e){var t=this;this.$confirm("确定要该公司开始营业?","提示",{type:"warning"}).then((function(){t.httpPost("/basic/enterprise/enable/"+e,"").then((function(e){t.$message({type:"success",message:"启用成功!"}),t.handleClick()}))})).catch((function(){}))},handleClick:function(e,t){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.state="inOperation"===this.activeName?1:0,this.httpPost("/basic/enterprise/query",t,null,!0).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},p=m,f=Object(u["a"])(p,a,o,!1,null,"49d2102c",null);t["default"]=f.exports},d4eb:function(e,t,r){"use strict";var a=r("5649"),o=r.n(a);o.a},d7d2:function(e,t,r){},d7f2:function(e,t,r){"use strict";var a=r("213f"),o=r.n(a);o.a},d947:function(e,t,r){"use strict";var a=r("169a"),o=r.n(a);o.a},e5a5:function(e,t,r){},e5d6:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("商品管理")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"出售中",name:"selling"}},[r("GoodTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,getPutaway:e.getPutaway,add:e.add,edit:e.edit,del:e.del}})],1),r("el-tab-pane",{attrs:{label:"已停用",name:"disuse"}},[r("GoodTable",{attrs:{tableData:e.tableData,queryForm:e.queryForm},on:{getSearch:e.getSearch,getPage:e.getPage,getPutaway:e.getPutaway,add:e.add,edit:e.edit,enable:e.enable}})],1)],1)],1)],1)},o=[],i=(r("e18c"),r("1c2e"),r("598d")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"queryInfo",staticClass:"form_border",attrs:{model:e.queryInfo,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"商品中文名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入商品中文名"},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}})],1),r("el-form-item",{attrs:{label:"商品英文名",prop:"englishName"}},[r("el-input",{attrs:{placeholder:"请输入商品英文名"},model:{value:e.queryInfo.englishName,callback:function(t){e.$set(e.queryInfo,"englishName",t)},expression:"queryInfo.englishName"}})],1),r("el-form-item",{staticClass:"select_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.add(t)}}},[e._v("新增商品")]),e._m(0)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{label:"缩略图"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{attrs:{width:"80",src:e.imgPath(t.row.picture),alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"name",label:"商品中文名"}}),r("el-table-column",{attrs:{prop:"englishName",label:"商品英文名"}}),r("el-table-column",{attrs:{prop:"sellPrice",label:"零售价(元)"}}),r("el-table-column",{attrs:{prop:"sellAmount",label:"销售金额"}}),r("el-table-column",{attrs:{prop:"refundAmount",label:"退款金额"}}),r("el-table-column",{attrs:{prop:"sellCount",label:"订单数"}}),r("el-table-column",{attrs:{prop:"remark",label:"备注"}}),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.edit(t.row)}}},[e._v("修改")]):e._e(),1==t.row.state?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),e.del(t.row.id)}}},[e._v("停用")]):e._e(),0==t.row.state?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),e.enable(t.row.id)}}},[e._v("启用")]):e._e()]}}])})],1),e.queryInfo.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(t){return t.stopPropagation(),e.$jumpToFirst(e.queryInfo,e.changePage)}}},[e._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(t){return t.stopPropagation(),e.$jumpToLast(e.queryInfo,e.changePage)}}},[e._v("尾页")]),r("el-pagination",{attrs:{background:"",total:e.queryInfo.total,"current-page":e.queryInfo.page,"page-size":e.queryInfo.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.queryInfo,"size",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"size",t)},"current-change":e.changePage}})],1):e._e()],1)],1)},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"})])}],n={props:["tableData","queryForm"],data:function(){return{queryInfo:this.queryForm}},methods:{imgPath:function(e){return e?this.$picDownload+e.substring(2,e.length-2):""},changePage:function(){this.$emit("getPage",this.queryInfo.page)},putaway:function(e){this.$emit("getPutaway",e)},search:function(){this.$emit("getSearch",this.queryInfo)},add:function(){this.$emit("add")},edit:function(e){this.$emit("edit",e)},del:function(e){this.$emit("del",e)},enable:function(e){this.$emit("enable",e)}},watch:{}},u=n,c=r("9ca4"),d=Object(c["a"])(u,s,l,!1,null,"f19e1938",null),m=d.exports,p={components:{ChooseMachine:i["a"],GoodTable:m},data:function(){return{activeName:"selling",queryForm:{name:"",englishName:"",state:1,size:10,page:1,total:""},tableData:[],editInfo:{},dialogVisible:!1,formLabelWidth:"120px",deviceName:"",selectId:"",selectDeviceName:""}},methods:{getPutaway:function(e){this.selectId=e.id,this.$refs.ChooseMachine.selected(e.deviceId)},getPage:function(e){this.queryForm.page=e,this.loadData()},getSearch:function(e){this.queryForm.total="",this.queryForm.page=1,this.loadData()},add:function(){this.$router.push({path:"/editGood",name:"EditGood",params:{type:"add"}})},edit:function(e){this.$router.push({path:"/editGood",name:"EditGood",params:{type:"edit",info:e}})},del:function(e){var t=this;this.$confirm("此操作将停用数据, 是否继续?","提示",{type:"warning"}).then((function(){t.httpPost("/item/disable/"+e,"").then((function(e){t.$message({type:"success",message:"停用成功!"}),t.handleClick()})).catch((function(){}))}))},enable:function(e){var t=this;this.$confirm("此操作将启用数据, 是否继续?","提示",{type:"warning"}).then((function(){t.httpPost("/item/enable/"+e,"").then((function(e){t.$message({type:"success",message:"启用成功!"}),t.handleClick()})).catch((function(){}))}))},getName:function(e){var t=this;this.selectDeviceName=e;var r={itemId:this.selectId.toString(),deviceIds:this.selectDeviceName.toString()};this.httpPost("/item/shelve_on",r).then((function(e){t.$message({type:"success",message:"绑定成功!"}),t.loadData()}))},handleClick:function(e,t){this.queryForm.total="",this.queryForm.page=1,this.loadData()},loadData:function(){var e=this,t=Object.assign({},this.queryForm);t.state="selling"===this.activeName?1:0,this.httpGet("/item/query",t).then((function(t){e.tableData=t.rows,e.queryForm.total=t.total}))}},mounted:function(){this.loadData()}},f=p,h=(r("b0d4"),Object(c["a"])(f,a,o,!1,null,"30ebba86",null));t["default"]=h.exports},ec11:function(e,t,r){},ef4e:function(e,t,r){},f6d3:function(e,t,r){"use strict";var a=r("fa4e"),o=r.n(a);o.a},f9bd:function(e,t,r){"use strict";var a=r("af49"),o=r.n(a);o.a},fa4e:function(e,t,r){},feff:function(e,t,r){}}]);
//# sourceMappingURL=base.f4a0f802.js.map